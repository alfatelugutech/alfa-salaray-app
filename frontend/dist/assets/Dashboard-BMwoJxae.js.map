{"version":3,"file":"Dashboard-BMwoJxae.js","sources":["../../src/utils/locationTracker.ts","../../src/components/ConnectionTest.tsx","../../src/components/LiveCamera.tsx","../../src/pages/Dashboard.tsx"],"sourcesContent":["import { locationTrackingService, LocationTrackingRequest } from '../services/locationTrackingService'\nimport { getCompleteLocation } from './geolocation'\n\nexport class LocationTracker {\n  private intervalId: number | null = null\n  private attendanceId: string | null = null\n  private isTracking: boolean = false\n  private trackingInterval: number = 30000 // 30 seconds default\n\n  constructor(intervalMs: number = 30000) {\n    this.trackingInterval = intervalMs\n  }\n\n  // Start continuous location tracking\n  async startTracking(attendanceId: string): Promise<void> {\n    if (this.isTracking) {\n      console.log('Location tracking already active')\n      return\n    }\n\n    this.attendanceId = attendanceId\n    this.isTracking = true\n\n    console.log('üöÄ Starting location tracking for attendance:', attendanceId)\n\n    // Track location immediately\n    await this.trackCurrentLocation()\n\n    // Set up interval for continuous tracking\n    this.intervalId = setInterval(async () => {\n      if (this.isTracking && this.attendanceId) {\n        await this.trackCurrentLocation()\n      }\n    }, this.trackingInterval)\n  }\n\n  // Stop location tracking\n  async stopTracking(): Promise<void> {\n    if (!this.isTracking || !this.attendanceId) {\n      console.log('No active tracking to stop')\n      return\n    }\n\n    console.log('üõë Stopping location tracking for attendance:', this.attendanceId)\n\n    // Clear interval\n    if (this.intervalId) {\n      clearInterval(this.intervalId)\n      this.intervalId = null\n    }\n\n    // Stop tracking on server\n    try {\n      await locationTrackingService.stopTracking(this.attendanceId)\n      console.log('‚úÖ Location tracking stopped successfully')\n    } catch (error) {\n      console.error('‚ùå Error stopping location tracking:', error)\n    }\n\n    // Reset state\n    this.isTracking = false\n    this.attendanceId = null\n  }\n\n  // Track current location\n  private async trackCurrentLocation(): Promise<void> {\n    if (!this.attendanceId) return\n\n    try {\n      // Get current location\n      const location = await getCompleteLocation()\n      \n      const trackingData: LocationTrackingRequest = {\n        attendanceId: this.attendanceId,\n        latitude: location.latitude,\n        longitude: location.longitude,\n        accuracy: location.accuracy,\n        address: location.address\n      }\n\n      // Send to server\n      await locationTrackingService.trackLocation(trackingData)\n      console.log('üìç Location tracked:', {\n        lat: location.latitude,\n        lng: location.longitude,\n        address: location.address,\n        timestamp: new Date().toISOString()\n      })\n\n    } catch (error) {\n      console.error('‚ùå Error tracking location:', error)\n    }\n  }\n\n  // Get tracking status\n  getStatus(): { isTracking: boolean; attendanceId: string | null } {\n    return {\n      isTracking: this.isTracking,\n      attendanceId: this.attendanceId\n    }\n  }\n\n  // Update tracking interval\n  setInterval(intervalMs: number): void {\n    this.trackingInterval = intervalMs\n    \n    // If currently tracking, restart with new interval\n    if (this.isTracking && this.intervalId) {\n      clearInterval(this.intervalId)\n      this.intervalId = setInterval(async () => {\n        if (this.isTracking && this.attendanceId) {\n          await this.trackCurrentLocation()\n        }\n      }, this.trackingInterval)\n    }\n  }\n}\n\n// Create a singleton instance\nexport const locationTracker = new LocationTracker()\n","import React, { useState, useEffect } from 'react'\r\nimport { checkBackendHealth } from '../services/api'\r\nimport { Wifi, WifiOff, AlertCircle, CheckCircle } from 'lucide-react'\r\n\r\nconst ConnectionTest: React.FC = () => {\r\n  const [isConnected, setIsConnected] = useState<boolean | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [lastCheck, setLastCheck] = useState<Date | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const testConnection = async () => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      const result = await checkBackendHealth()\r\n      setIsConnected(result.isHealthy)\r\n      setLastCheck(new Date())\r\n      \r\n      if (!result.isHealthy) {\r\n        setError(result.error)\r\n      }\r\n    } catch (err: any) {\r\n      setIsConnected(false)\r\n      setError(err.message)\r\n      setLastCheck(new Date())\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Test connection on component mount\r\n    testConnection()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm border p-4 mb-4\">\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900\">Backend Connection</h3>\r\n        <button\r\n          onClick={testConnection}\r\n          disabled={isLoading}\r\n          className=\"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50\"\r\n        >\r\n          {isLoading ? 'Testing...' : 'Test Again'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-3\">\r\n        {isConnected === null ? (\r\n          <AlertCircle className=\"w-5 h-5 text-gray-400\" />\r\n        ) : isConnected ? (\r\n          <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n        ) : (\r\n          <WifiOff className=\"w-5 h-5 text-red-500\" />\r\n        )}\r\n        \r\n        <div className=\"flex-1\">\r\n          {isConnected === null && (\r\n            <p className=\"text-gray-600\">Testing connection...</p>\r\n          )}\r\n          {isConnected === true && (\r\n            <div>\r\n              <p className=\"text-green-600 font-medium\">‚úÖ Backend is running</p>\r\n              {lastCheck && (\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Last checked: {lastCheck.toLocaleTimeString()}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {isConnected === false && (\r\n            <div>\r\n              <p className=\"text-red-600 font-medium\">‚ùå Cannot connect to backend</p>\r\n              {error && (\r\n                <p className=\"text-sm text-red-500 mt-1\">{error}</p>\r\n              )}\r\n              {lastCheck && (\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Last checked: {lastCheck.toLocaleTimeString()}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {isConnected === false && (\r\n        <div className=\"mt-3 p-3 bg-red-50 border border-red-200 rounded\">\r\n          <h4 className=\"text-sm font-medium text-red-800 mb-2\">Troubleshooting:</h4>\r\n          <ul className=\"text-xs text-red-700 space-y-1\">\r\n            <li>‚Ä¢ Check if the backend server is running</li>\r\n            <li>‚Ä¢ Verify your internet connection</li>\r\n            <li>‚Ä¢ Try refreshing the page</li>\r\n            <li>‚Ä¢ Contact support if the issue persists</li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ConnectionTest\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { Camera, X, RotateCcw } from 'lucide-react';\r\n\r\ninterface LiveCameraProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onCapture: (imageData: string) => void;\r\n  title: string;\r\n}\r\n\r\nconst LiveCamera: React.FC<LiveCameraProps> = ({ isOpen, onClose, onCapture, title }) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [facingMode, setFacingMode] = useState<'user' | 'environment'>('user');\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      startCamera();\r\n    } else {\r\n      stopCamera();\r\n    }\r\n\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [isOpen, facingMode]);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const constraints = {\r\n        video: {\r\n          facingMode: facingMode,\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        },\r\n        audio: false\r\n      };\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n      streamRef.current = stream;\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n        setIsStreaming(true);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('‚ùå Camera access failed:', error);\r\n      throw new Error('Camera access denied or not available');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    setIsStreaming(false);\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    if (!context) return;\r\n\r\n    // Set canvas dimensions to match video\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    // Draw video frame to canvas\r\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    // Convert to base64\r\n    const imageData = canvas.toDataURL('image/jpeg', 0.8);\r\n    \r\n    // Stop camera and close\r\n    stopCamera();\r\n    onCapture(imageData);\r\n    onClose();\r\n  };\r\n\r\n  const switchCamera = () => {\r\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center\">\r\n      <div className=\"relative w-full max-w-md mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-white text-lg font-semibold\">{title}</h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:text-gray-300 transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Camera View */}\r\n        <div className=\"relative bg-black rounded-lg overflow-hidden\">\r\n          <video\r\n            ref={videoRef}\r\n            className=\"w-full h-64 object-cover\"\r\n            playsInline\r\n            muted\r\n          />\r\n          \r\n          {/* Camera Controls Overlay */}\r\n          <div className=\"absolute top-4 right-4\">\r\n            <button\r\n              onClick={switchCamera}\r\n              className=\"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all\"\r\n              title=\"Switch Camera\"\r\n            >\r\n              <RotateCcw className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Capture Button */}\r\n          <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2\">\r\n            <button\r\n              onClick={capturePhoto}\r\n              disabled={!isStreaming}\r\n              className=\"bg-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n            >\r\n              <Camera className=\"w-8 h-8 text-gray-800\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <div className=\"mt-4 text-center\">\r\n          <p className=\"text-white text-sm\">\r\n            {isStreaming ? 'Position yourself in the frame and tap the camera button' : 'Starting camera...'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Hidden canvas for capture */}\r\n        <canvas ref={canvasRef} className=\"hidden\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveCamera;\r\n","import React, { useState, useEffect } from 'react'\nimport { useAuth } from '../hooks/useAuth'\nimport { useNavigate } from 'react-router-dom'\nimport { useQuery, useMutation, useQueryClient } from 'react-query'\nimport { attendanceService } from '../services/attendanceService'\nimport { leaveService } from '../services/leaveService'\nimport { employeeService } from '../services/employeeService'\nimport { authService } from '../services/authService'\nimport { Clock, X, MapPin, Camera } from 'lucide-react'\nimport toast from 'react-hot-toast'\nimport { getCompleteLocation, getDeviceInfo } from '../utils/geolocation'\nimport { captureSelfie, compressImage, checkCameraPermissions } from '../utils/camera'\nimport { locationTracker } from '../utils/locationTracker'\nimport ConnectionTest from '../components/ConnectionTest'\nimport LiveCamera from '../components/LiveCamera'\n\nconst Dashboard: React.FC = () => {\n  const { user } = useAuth()\n  const navigate = useNavigate()\n  \n  // Debug user data\n  console.log('üë§ Dashboard user data:', user)\n  console.log('üîë User role:', user?.role)\n  console.log('üÜî User ID:', user?.id)\n  const [showSelfAttendanceModal, setShowSelfAttendanceModal] = useState(false)\n  const [location, setLocation] = useState<any>(null)\n  const [selfie, setSelfie] = useState<string | null>(null)\n  const [isAutoCapturing, setIsAutoCapturing] = useState(false)\n  const [showLiveCamera, setShowLiveCamera] = useState(false)\n  const queryClient = useQueryClient()\n\n\n  // Smart status detection\n  const getSmartStatus = () => {\n    if (attendanceStatus?.status?.isCompleted) {\n      return {\n        type: 'completed',\n        message: 'üéâ Work day completed successfully!',\n        color: 'green',\n        icon: '‚úÖ'\n      }\n    } else if (attendanceStatus?.status?.canCheckOut) {\n      return {\n        type: 'checkout',\n        message: 'üåÜ Ready for smart check-out',\n        color: 'orange',\n        icon: 'üïê'\n      }\n    } else {\n      return {\n        type: 'checkin',\n        message: 'üåÖ Ready for smart check-in',\n        color: 'blue',\n        icon: 'üöÄ'\n      }\n    }\n  }\n  \n  // Fetch data based on user role with better error handling\n  const { data: attendanceData, error: attendanceError } = useQuery(\n    'my-attendance',\n    () => attendanceService.getAttendance({ employeeId: user?.employeeId }),\n    { \n      enabled: !!user?.employeeId,\n      retry: 2,\n      retryDelay: 1000,\n      onError: (error: any) => {\n        if (error.code !== 'NETWORK_ERROR') {\n          console.error('Attendance data fetch error:', error)\n        }\n      }\n    }\n  )\n  \n  const { data: leaveData, error: leaveError } = useQuery(\n    'my-leave-requests',\n    () => leaveService.getLeaveRequests({ employeeId: user?.employeeId }),\n    { \n      enabled: !!user?.employeeId,\n      retry: 2,\n      retryDelay: 1000,\n      onError: (error: any) => {\n        if (error.code !== 'NETWORK_ERROR') {\n          console.error('Leave data fetch error:', error)\n        }\n      }\n    }\n  )\n  \n  const { data: employeeStats, error: employeeStatsError } = useQuery(\n    'employee-stats',\n    () => employeeService.getEmployeeStats(),\n    { \n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\n      retry: 2,\n      retryDelay: 1000,\n      onError: (error: any) => {\n        if (error.code !== 'NETWORK_ERROR') {\n          console.error('Employee stats fetch error:', error)\n        }\n      }\n    }\n  )\n  \n  const { data: attendanceStats, error: attendanceStatsError } = useQuery(\n    'attendance-stats',\n    () => attendanceService.getAttendanceStats(),\n    { \n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\n      retry: 2,\n      retryDelay: 1000,\n      onError: (error: any) => {\n        if (error.code !== 'NETWORK_ERROR') {\n          console.error('Attendance stats fetch error:', error)\n        }\n      }\n    }\n  )\n  \n  const { data: leaveStats, error: leaveStatsError } = useQuery(\n    'leave-stats',\n    () => leaveService.getLeaveStats(),\n    { \n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\n      retry: 2,\n      retryDelay: 1000,\n      onError: (error: any) => {\n        if (error.code !== 'NETWORK_ERROR') {\n          console.error('Leave stats fetch error:', error)\n        }\n      }\n    }\n  )\n\n  // Self check-in mutation\n  const selfCheckInMutation = useMutation(\n    attendanceService.selfCheckIn,\n    {\n      onSuccess: (data) => {\n        queryClient.invalidateQueries('my-attendance')\n        queryClient.invalidateQueries('attendance-status')\n        \n        // Start location tracking after successful check-in\n        if (data?.id) {\n          locationTracker.startTracking(data.id)\n          console.log('üöÄ Location tracking started for attendance:', data.id)\n        }\n        \n        toast.success('‚úÖ Check-in completed successfully! Location tracking started.')\n        setShowSelfAttendanceModal(false)\n        setLocation(null)\n        setSelfie(null)\n      },\n      onError: (error: any) => {\n        const errorMessage = error.response?.data?.error || 'Failed to check in'\n        if (errorMessage.includes('already marked')) {\n          toast.error('You have already checked in today. Please check out first.')\n        } else if (errorMessage.includes('Already completed attendance')) {\n          toast.error('Attendance already completed for today')\n        } else {\n          toast.error(errorMessage)\n        }\n      }\n    }\n  )\n\n  // Self check-out mutation\n  const selfCheckOutMutation = useMutation(\n    attendanceService.selfCheckOut,\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries('my-attendance')\n        queryClient.invalidateQueries('attendance-status')\n        \n        // Stop location tracking after successful check-out\n        locationTracker.stopTracking()\n        console.log('üõë Location tracking stopped after check-out')\n        \n        toast.success('‚úÖ Check-out completed successfully! Your attendance has been recorded with selfie and location.')\n        setShowSelfAttendanceModal(false)\n        setLocation(null)\n        setSelfie(null)\n      },\n      onError: (error: any) => {\n        const errorMessage = error.response?.data?.error || 'Failed to check out'\n        if (errorMessage.includes('No active check-in')) {\n          toast.error('‚ùå Please check in first before checking out')\n        } else if (errorMessage.includes('Already checked out')) {\n          toast.error('‚ùå You have already checked out today')\n        } else if (errorMessage.includes('User ID required')) {\n          toast.error('‚ùå Authentication error. Please login again.')\n        } else {\n          toast.error(`‚ùå Check-out failed: ${errorMessage}`)\n        }\n      }\n    }\n  )\n\n  // Smart auto-submit when both selfie and location are ready\n  useEffect(() => {\n    if (selfie && location && !selfCheckInMutation.isLoading && !selfCheckOutMutation.isLoading) {\n      console.log('üß† Smart system: Both selfie and location ready, auto-submitting...')\n      // Smart delay based on data size and network conditions\n      const smartDelay = selfie.length > 100000 ? 1000 : 500\n      const timer = setTimeout(() => {\n        handleAutoSubmitAttendance()\n      }, smartDelay)\n      return () => clearTimeout(timer)\n    }\n  }, [selfie, location, selfCheckInMutation.isLoading, selfCheckOutMutation.isLoading])\n\n  // Get current attendance status\n  const { data: attendanceStatus } = useQuery(\n    'attendance-status',\n    () => attendanceService.getAttendanceStatus(),\n    {\n      enabled: !!user?.employeeId,\n      refetchInterval: 30000, // Refetch every 30 seconds\n      refetchOnWindowFocus: true,\n      onSuccess: (data) => {\n        console.log('üìä Frontend attendance status:', data);\n      }\n    }\n  )\n\n  // Open live camera for selfie capture\n  const handleTakeSelfieAndLocation = async () => {\n    // Proceed directly for both check-in and check-out\n    await startSelfieCapture()\n  }\n\n  // Start the selfie capture process\n  const startSelfieCapture = async () => {\n    // First capture location automatically\n    try {\n      const loc = await getCompleteLocation()\n      setLocation(loc)\n      console.log('üìç Location captured automatically:', {\n        hasLocation: !!loc,\n        locationData: loc\n      })\n      toast.success('üìç Location captured automatically!')\n    } catch (error: any) {\n      console.log('‚ùå Location capture failed:', error)\n      toast.error(error.message || 'Failed to get location')\n      return\n    }\n\n    // Then open live camera for selfie\n    setShowLiveCamera(true)\n  }\n\n\n  // Handle selfie capture from live camera\n  const handleSelfieCapture = (imageData: string) => {\n    setSelfie(imageData)\n    console.log('üì∏ Selfie captured from live camera:', {\n      hasSelfie: !!imageData,\n      selfieLength: imageData?.length || 0\n    })\n    toast.success('üì∏ Selfie captured successfully!')\n    \n    // Close the live camera\n    setShowLiveCamera(false)\n    \n    // Show info about what's happening next\n    if (location) {\n      toast('‚úÖ Both selfie and location ready! Attendance will be marked automatically.', { icon: '‚ÑπÔ∏è' })\n    } else {\n      toast('üìç Selfie captured! Waiting for location data...', { icon: '‚ÑπÔ∏è' })\n    }\n  }\n\n  const handleAutoSubmitAttendance = () => {\n    // Get device info\n    const deviceInfo = getDeviceInfo()\n    \n    // Debug current state\n    console.log('üîç Auto-submit state check:', {\n      hasSelfie: !!selfie,\n      selfieLength: selfie?.length || 0,\n      hasLocation: !!location,\n      locationData: location,\n      attendanceStatus: attendanceStatus?.status,\n      user: user,\n      userId: user?.id,\n      isAuthenticated: authService.isAuthenticated()\n    })\n    \n    // Determine if this is check-in or check-out based on current status\n    const isCheckOut = attendanceStatus?.status?.canCheckOut\n    \n    // Enhanced validation for check-out requirements\n    if (isCheckOut) {\n      // Check-out specific validation\n      if (!selfie) {\n        toast.error('‚ùå Check-out requires a selfie. Please capture your selfie first.')\n        return\n      }\n      if (!location) {\n        toast.error('‚ùå Check-out requires location. Please allow location access.')\n        return\n      }\n      console.log('‚úÖ Check-out requirements validated: Selfie + Location captured')\n    } else {\n      // Check-in specific validation\n      if (!selfie) {\n        toast.error('‚ùå Check-in requires a selfie. Please capture your selfie first.')\n        return\n      }\n      if (!location) {\n        toast.error('‚ùå Check-in requires location. Please allow location access.')\n        return\n      }\n      console.log('‚úÖ Check-in requirements validated: Selfie + Location captured')\n    }\n    \n    if (isCheckOut) {\n      // Check-out flow\n      const checkOutData = {\n        notes: undefined, // No notes field\n        checkOutSelfie: selfie || undefined,\n        checkOutLocation: location || undefined\n      }\n      \n      // Debug logging\n      console.log('üîç Check-out data being sent:', {\n        hasSelfie: !!selfie,\n        selfieLength: selfie?.length || 0,\n        selfiePreview: selfie?.substring(0, 50) + '...',\n        hasLocation: !!location,\n        locationData: location,\n        checkOutData,\n        fullPayload: {\n          notes: undefined,\n          checkOutSelfie: selfie || undefined,\n          checkOutLocation: location || undefined\n        }\n      })\n      \n      toast.loading('üéØ Automatically checking out...', { duration: 2000 })\n      selfCheckOutMutation.mutate(checkOutData)\n    } else {\n      // Check-in flow\n      const checkInData = {\n        isRemote: false, // Default to false, no user input needed\n        notes: undefined, // No notes field\n        checkInSelfie: selfie || undefined,\n        checkInLocation: location || undefined,\n        deviceInfo: deviceInfo || undefined,\n        shiftId: null\n      }\n      \n      // Debug logging\n      console.log('üîç Check-in data being sent:', {\n        hasSelfie: !!selfie,\n        selfieLength: selfie?.length || 0,\n        selfiePreview: selfie?.substring(0, 50) + '...',\n        hasLocation: !!location,\n        locationData: location,\n        checkInData,\n        fullPayload: {\n          isRemote: false,\n          notes: undefined,\n          checkInSelfie: selfie || undefined,\n          checkInLocation: location || undefined,\n          deviceInfo: deviceInfo || undefined,\n          shiftId: null\n        }\n      })\n      \n      toast.loading('üéØ Automatically checking in...', { duration: 2000 })\n      selfCheckInMutation.mutate(checkInData)\n    }\n  }\n\n\n  // Check if user is admin/HR\n  const isAdmin = user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER'\n  \n  return (\n    <div className=\"p-6\">\n      {/* Connection Test Component */}\n      <ConnectionTest />\n      \n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n          üéâ Dashboard Loaded Successfully!\n        </h1>\n        <p className=\"text-gray-600 mb-6\">\n          Welcome to the Employee Attendance System Dashboard\n        </p>\n        \n        {/* Role-based content */}\n        {isAdmin ? (\n          // Admin/HR Dashboard\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-blue-900\">Total Employees</h3>\n              <p className=\"text-2xl font-bold text-blue-600\">\n                {employeeStats?.totalEmployees || 0}\n              </p>\n            </div>\n            <div className=\"bg-green-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-green-900\">Active Today</h3>\n              <p className=\"text-2xl font-bold text-green-600\">\n                {attendanceStats?.presentCount || 0}\n              </p>\n            </div>\n            <div className=\"bg-purple-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-purple-900\">Pending Leaves</h3>\n              <p className=\"text-2xl font-bold text-purple-600\">\n                {leaveStats?.pendingRequests || 0}\n              </p>\n            </div>\n          </div>\n        ) : (\n          // Employee Dashboard\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-blue-900\">My Attendance</h3>\n              <p className=\"text-2xl font-bold text-blue-600\">\n                {attendanceData?.data?.attendances?.length || 0}\n              </p>\n            </div>\n            <div className=\"bg-green-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-green-900\">My Leave Requests</h3>\n              <p className=\"text-2xl font-bold text-green-600\">\n                {leaveData?.data?.leaveRequests?.length || 0}\n              </p>\n            </div>\n            <div className=\"bg-purple-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold text-purple-900\">Pending Leaves</h3>\n              <p className=\"text-2xl font-bold text-purple-600\">\n                {leaveData?.data?.leaveRequests?.filter((leave: any) => leave.status === 'PENDING').length || 0}\n              </p>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"mt-8\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Quick Actions</h2>\n          <div className=\"space-y-2\">\n            {isAdmin ? (\n              // Admin actions\n              <>\n                <button \n                  onClick={() => navigate('/attendance')}\n                  className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors cursor-pointer\"\n                >\n                  Mark Attendance\n                </button>\n                <button \n                  onClick={() => navigate('/employees')}\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\n                >\n                  View Employees\n                </button>\n                <button \n                  onClick={() => navigate('/leave-requests')}\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\n                >\n                  Manage Leave Requests\n                </button>\n                {user?.role === 'SUPER_ADMIN' && (\n                  <>\n                    <button \n                      onClick={() => navigate('/employees')}\n                      className=\"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors cursor-pointer\"\n                    >\n                      User & Role Management\n                    </button>\n                    <button \n                      onClick={() => navigate('/shifts')}\n                      className=\"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 transition-colors cursor-pointer\"\n                    >\n                      Shift Management\n                    </button>\n                    <button \n                      onClick={() => navigate('/settings')}\n                      className=\"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors cursor-pointer\"\n                    >\n                      System Settings\n                    </button>\n                  </>\n                )}\n              </>\n            ) : (\n              // Employee actions\n              <>\n                <button \n                  onClick={() => setShowSelfAttendanceModal(true)}\n                  className=\"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors cursor-pointer\"\n                >\n                  Mark Self Attendance\n                </button>\n                <button \n                  onClick={() => navigate('/my-attendance')}\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\n                >\n                  View My Attendance\n                </button>\n                <button \n                  onClick={() => navigate('/my-leave')}\n                  className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors cursor-pointer\"\n                >\n                  Request Leave\n                </button>\n                <button \n                  onClick={() => navigate('/profile')}\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\n                >\n                  View My Profile\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n        \n        {/* Super Admin Features */}\n        {user?.role === 'SUPER_ADMIN' && (\n          <div className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Super Admin Features</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\n                <h3 className=\"font-semibold text-purple-900 mb-2\">User Management</h3>\n                <p className=\"text-sm text-purple-700 mb-3\">Manage employees and users</p>\n                <button \n                  onClick={() => navigate('/employees')}\n                  className=\"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 text-sm transition-colors cursor-pointer\"\n                >\n                  Manage Employees\n                </button>\n              </div>\n              \n              <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200\">\n                <h3 className=\"font-semibold text-orange-900 mb-2\">Shift Management</h3>\n                <p className=\"text-sm text-orange-700 mb-3\">Create and manage work shifts</p>\n                <button \n                  onClick={() => navigate('/shifts')}\n                  className=\"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 text-sm transition-colors cursor-pointer\"\n                >\n                  Manage Shifts\n                </button>\n              </div>\n              \n              <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n                <h3 className=\"font-semibold text-red-900 mb-2\">System Settings</h3>\n                <p className=\"text-sm text-red-700 mb-3\">Configure system-wide settings</p>\n                <button \n                  onClick={() => navigate('/settings')}\n                  className=\"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 text-sm transition-colors cursor-pointer\"\n                >\n                  System Config\n                </button>\n              </div>\n              \n              <div className=\"bg-indigo-50 p-4 rounded-lg border border-indigo-200\">\n                <h3 className=\"font-semibold text-indigo-900 mb-2\">Payroll Management</h3>\n                <p className=\"text-sm text-indigo-700 mb-3\">Manage employee salaries</p>\n                <button \n                  onClick={() => navigate('/payroll')}\n                  className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 text-sm transition-colors cursor-pointer\"\n                >\n                  Manage Payroll\n                </button>\n              </div>\n              \n              <div className=\"bg-teal-50 p-4 rounded-lg border border-teal-200\">\n                <h3 className=\"font-semibold text-teal-900 mb-2\">Attendance Reports</h3>\n                <p className=\"text-sm text-teal-700 mb-3\">View attendance analytics</p>\n                <button \n                  onClick={() => navigate('/attendance')}\n                  className=\"w-full bg-teal-600 text-white py-2 px-4 rounded hover:bg-teal-700 text-sm transition-colors cursor-pointer\"\n                >\n                  View Attendance\n                </button>\n              </div>\n              \n              <div className=\"bg-pink-50 p-4 rounded-lg border border-pink-200\">\n                <h3 className=\"font-semibold text-pink-900 mb-2\">Leave Management</h3>\n                <p className=\"text-sm text-pink-700 mb-3\">Manage leave requests</p>\n                <button \n                  onClick={() => navigate('/leave')}\n                  className=\"w-full bg-pink-600 text-white py-2 px-4 rounded hover:bg-pink-700 text-sm transition-colors cursor-pointer\"\n                >\n                  Manage Leaves\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"mt-8 p-4 bg-green-50 rounded-lg\">\n          <h3 className=\"font-semibold text-green-900\">System Status</h3>\n          <p className=\"text-green-700\">‚úÖ All systems operational</p>\n          {(attendanceError || leaveError || employeeStatsError || attendanceStatsError || leaveStatsError) && (\n            <div className=\"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded\">\n              <p className=\"text-yellow-800 text-sm\">\n                ‚ö†Ô∏è Some data may not be up to date due to network issues. Please refresh the page.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Self-Attendance Modal */}\n      {showSelfAttendanceModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-lg mx-auto max-h-[95vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\n              <h2 className=\"text-xl font-semibold text-gray-900 flex items-center\">\n                <Clock className=\"w-5 h-5 mr-2\" />\n                Mark Attendance\n              </h2>\n              <button\n                onClick={() => {\n                  setShowSelfAttendanceModal(false)\n                  setSelfie(null)\n                  setLocation(null)\n                }}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              {/* Automatic Data Capture Notice */}\n              {/* Smart Attendance Status Indicator */}\n              {(() => {\n                const smartStatus = getSmartStatus()\n                return (\n                  <div className={`mb-6 p-4 rounded-lg border-2 ${\n                    smartStatus.color === 'green' ? 'bg-green-50 border-green-200' :\n                    smartStatus.color === 'orange' ? 'bg-orange-50 border-orange-200' :\n                    'bg-blue-50 border-blue-200'\n                  }`}>\n                    <div className=\"flex items-center justify-center gap-3\">\n                      <div className={`w-4 h-4 rounded-full ${\n                        smartStatus.color === 'green' ? 'bg-green-500' :\n                        smartStatus.color === 'orange' ? 'bg-orange-500' :\n                        'bg-blue-500'\n                      }`}></div>\n                      <span className=\"text-sm font-medium text-gray-700\">\n                        {smartStatus.icon} {smartStatus.message}\n                      </span>\n                    </div>\n                    {smartStatus.type !== 'completed' && (\n                      <div className=\"mt-2 text-center\">\n                        <p className=\"text-xs text-gray-600\">\n                          üß† Smart system will handle location + selfie automatically\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )\n              })()}\n\n              <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Clock className=\"h-5 w-5 text-blue-600\" />\n                  <span className=\"font-medium text-blue-800\">Automatic Data Capture</span>\n                </div>\n                <p className=\"text-sm text-blue-700\">\n                  Date, time, and status will be automatically captured when you take your selfie.\n                </p>\n              </div>\n\n              {/* Phase 2: Selfie & Location Capture */}\n              {!selfie && !location ? (\n                <div className=\"p-8 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 border-2 border-blue-400 rounded-xl shadow-md\">\n                  <div className=\"text-center mb-6\">\n                    <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ${\n                      attendanceStatus?.status?.canCheckOut \n                        ? 'bg-orange-600' \n                        : attendanceStatus?.status?.isCompleted\n                        ? 'bg-green-600'\n                        : 'bg-blue-600'\n                    }`}>\n                      <Camera className=\"w-10 h-10 text-white\" />\n                    </div>\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                      {attendanceStatus?.status?.isCompleted \n                        ? '‚úÖ Attendance Completed' \n                        : attendanceStatus?.status?.canCheckOut \n                        ? 'üì∏ Check-Out Selfie' \n                        : 'üì∏ Check-In Selfie'\n                      }\n                    </h3>\n                    <p className=\"text-base text-gray-700\">\n                      {attendanceStatus?.status?.isCompleted \n                        ? 'üéâ You have completed your attendance for today'\n                        : attendanceStatus?.status?.canCheckOut \n                        ? 'üåÜ Take your check-out selfie' \n                        : 'üåÖ Take your check-in selfie'\n                      }\n                    </p>\n                    <p className=\"text-sm text-gray-600 mt-2\">\n                      {attendanceStatus?.status?.isCompleted \n                        ? 'Great job! See you tomorrow.'\n                        : attendanceStatus?.status?.canCheckOut\n                        ? 'üåÜ One-click smart checkout with selfie & location'\n                        : 'üåÖ One-click smart check-in with selfie & location'\n                      }\n                    </p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={handleTakeSelfieAndLocation}\n                    disabled={isAutoCapturing || attendanceStatus?.status?.isCompleted}\n                    className={`w-full flex items-center justify-center gap-3 px-8 py-4 text-white text-xl font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl ${\n                      attendanceStatus?.status?.isCompleted\n                        ? 'bg-gray-500 cursor-not-allowed'\n                        : attendanceStatus?.status?.canCheckOut\n                        ? 'bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700 hover:from-orange-600 hover:via-orange-700 hover:to-orange-800'\n                        : 'bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:from-blue-600 hover:via-blue-700 hover:to-blue-800'\n                    }`}\n                  >\n                    {isAutoCapturing ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\n                        Opening Camera...\n                      </>\n                    ) : attendanceStatus?.status?.isCompleted ? (\n                      <>\n                        <div className=\"w-6 h-6\">‚úÖ</div>\n                        Attendance Completed\n                      </>\n                    ) : (\n                      <>\n                        <Camera className=\"w-6 h-6\" />\n                        üì∏ {attendanceStatus?.status?.canCheckOut ? 'Smart Check-Out' : 'Smart Check-In'}\n                      </>\n                    )}\n                  </button>\n                  <p className=\"text-xs text-gray-600 mt-4 text-center bg-white/50 p-3 rounded-lg\">\n                    ‚ÑπÔ∏è {attendanceStatus?.status?.canCheckOut \n                      ? 'Smart Check-Out: Automatic location + live camera selfie'\n                      : 'Smart Check-In: Automatic location + live camera selfie'\n                    }\n                  </p>\n                </div>\n              ) : (\n                <>\n                  {/* Show captured selfie */}\n                  {selfie && (\n                    <div>\n                      <label className=\"label text-lg font-semibold\">\n                        üì∏ Attendance Selfie ‚úÖ\n                      </label>\n                      <div className=\"relative\">\n                        <img \n                          src={selfie} \n                          alt=\"Attendance Selfie\" \n                          className=\"w-full h-80 object-cover rounded-xl border-4 border-green-500 shadow-lg\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setSelfie(null)\n                            setLocation(null)\n                          }}\n                          className=\"absolute top-3 right-3 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2 shadow-lg\"\n                        >\n                          <Camera className=\"w-5 h-5\" />\n                          Retake\n                        </button>\n                      </div>\n                      \n                      {/* Smart Manual Submit Button */}\n                      {selfie && location && (\n                        <div className=\"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg shadow-lg\">\n                          <div className=\"text-center\">\n                            <div className=\"flex items-center justify-center gap-2 mb-3\">\n                              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                              <p className=\"text-green-800 font-medium\">\n                                üß† Smart system ready! Both selfie and location captured\n                              </p>\n                              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                            </div>\n                            <button\n                              type=\"button\"\n                              onClick={handleAutoSubmitAttendance}\n                              disabled={selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading}\n                              className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-bold text-lg hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 shadow-lg transform transition-all duration-300 hover:scale-105\"\n                            >\n                              {selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading ? (\n                                <>\n                                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\n                                  {attendanceStatus?.status?.canCheckOut ? 'Checking Out...' : 'Checking In...'}\n                                </>\n                              ) : (\n                                <>\n                                  <Clock className=\"w-6 h-6\" />\n                                  {attendanceStatus?.status?.canCheckOut ? 'Complete Check-Out' : 'Complete Check-In'}\n                                </>\n                              )}\n                            </button>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Show captured location */}\n                  {location && (\n                    <div>\n                      <label className=\"label\">Your Location ‚úÖ</label>\n                      <div className=\"p-3 bg-green-50 border border-green-200 rounded\">\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"w-4 h-4 text-green-600\" />\n                          <div className=\"flex-1\">\n                            <p className=\"text-sm font-medium text-green-900\">\n                              {location.address || `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </>\n              )}\n\n              {/* Show confirmation only after selfie is captured */}\n              {selfie && location && (\n                <>\n                  {/* Automatic time capture notice */}\n                  <div className=\"p-3 bg-green-50 rounded-lg border border-green-200\">\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-4 w-4 text-green-600\" />\n                      <span className=\"text-sm font-medium text-green-800\">Time will be automatically captured</span>\n                    </div>\n                    <p className=\"text-xs text-green-700 mt-1\">\n                      Current time will be used for check-in/check-out\n                    </p>\n                  </div>\n\n                  {/* Info Badge */}\n                  <div className=\"p-2 bg-blue-50 border border-blue-200 rounded text-center\">\n                    <p className=\"text-xs text-blue-700\">\n                      ‚úÖ Selfie, Location, Device & IP captured\n                    </p>\n                  </div>\n                </>\n              )}\n              \n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowSelfAttendanceModal(false)}\n                  className=\"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={async () => {\n                    try {\n                      const permissionCheck = await checkCameraPermissions()\n                      if (permissionCheck.hasPermission) {\n                        toast.success('‚úÖ Camera is working perfectly!')\n                      } else {\n                        toast.error(permissionCheck.message)\n                      }\n                    } catch (error: any) {\n                      toast.error('Camera test failed: ' + error.message)\n                    }\n                  }}\n                  className=\"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors mr-2\"\n                >\n                  Test Camera\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleTakeSelfieAndLocation}\n                  disabled={isAutoCapturing || selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading}\n                  className=\"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50\"\n                >\n                  {isAutoCapturing ? 'Capturing...' : \n                   selfCheckInMutation.isLoading ? 'Checking In...' :\n                   selfCheckOutMutation.isLoading ? 'Checking Out...' :\n                   'Take Selfie & Mark Attendance'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Live Camera Component */}\n      <LiveCamera\n        isOpen={showLiveCamera}\n        onClose={() => setShowLiveCamera(false)}\n        onCapture={handleSelfieCapture}\n        title={attendanceStatus?.status?.canCheckOut ? 'Check-Out Selfie' : 'Check-In Selfie'}\n      />\n\n    </div>\n  )\n}\n\nexport default Dashboard\n\n"],"names":["LocationTracker","intervalMs","__publicField","attendanceId","locationTrackingService","error","location","getCompleteLocation","trackingData","locationTracker","ConnectionTest","isConnected","setIsConnected","useState","isLoading","setIsLoading","lastCheck","setLastCheck","setError","testConnection","result","checkBackendHealth","err","useEffect","jsxs","jsx","AlertCircle","CheckCircle","WifiOff","LiveCamera","isOpen","onClose","onCapture","title","videoRef","useRef","canvasRef","streamRef","isStreaming","setIsStreaming","facingMode","setFacingMode","startCamera","stopCamera","constraints","stream","track","capturePhoto","video","canvas","context","imageData","switchCamera","prev","X","RotateCcw","Camera","Dashboard","user","useAuth","navigate","useNavigate","showSelfAttendanceModal","setShowSelfAttendanceModal","setLocation","selfie","setSelfie","isAutoCapturing","setIsAutoCapturing","showLiveCamera","setShowLiveCamera","queryClient","useQueryClient","getSmartStatus","_a","attendanceStatus","_b","attendanceData","attendanceError","useQuery","attendanceService","leaveData","leaveError","leaveService","employeeStats","employeeStatsError","employeeService","attendanceStats","attendanceStatsError","leaveStats","leaveStatsError","selfCheckInMutation","useMutation","data","toast","errorMessage","selfCheckOutMutation","smartDelay","timer","handleAutoSubmitAttendance","handleTakeSelfieAndLocation","startSelfieCapture","loc","handleSelfieCapture","deviceInfo","getDeviceInfo","authService","isCheckOut","checkOutData","checkInData","isAdmin","leave","Fragment","Clock","smartStatus","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","_u","_v","MapPin","permissionCheck","checkCameraPermissions","_w"],"mappings":"yvBAGO,MAAMA,EAAgB,CAM3B,YAAYC,EAAqB,IAAO,CALhCC,EAAA,kBAA4B,MAC5BA,EAAA,oBAA8B,MAC9BA,EAAA,kBAAsB,IACtBA,EAAA,wBAA2B,KAGjC,KAAK,iBAAmBD,CAC1B,CAGA,MAAM,cAAcE,EAAqC,CACvD,GAAI,KAAK,WAAY,CACnB,QAAQ,IAAI,kCAAkC,EAC9C,MACF,CAEA,KAAK,aAAeA,EACpB,KAAK,WAAa,GAElB,QAAQ,IAAI,gDAAiDA,CAAY,EAGzE,MAAM,KAAK,qBAAA,EAGX,KAAK,WAAa,YAAY,SAAY,CACpC,KAAK,YAAc,KAAK,cAC1B,MAAM,KAAK,qBAAA,CAEf,EAAG,KAAK,gBAAgB,CAC1B,CAGA,MAAM,cAA8B,CAClC,GAAI,CAAC,KAAK,YAAc,CAAC,KAAK,aAAc,CAC1C,QAAQ,IAAI,4BAA4B,EACxC,MACF,CAEA,QAAQ,IAAI,gDAAiD,KAAK,YAAY,EAG1E,KAAK,aACP,cAAc,KAAK,UAAU,EAC7B,KAAK,WAAa,MAIpB,GAAI,CACF,MAAMC,GAAwB,aAAa,KAAK,YAAY,EAC5D,QAAQ,IAAI,0CAA0C,CACxD,OAASC,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,CAC5D,CAGA,KAAK,WAAa,GAClB,KAAK,aAAe,IACtB,CAGA,MAAc,sBAAsC,CAClD,GAAK,KAAK,aAEV,GAAI,CAEF,MAAMC,EAAW,MAAMC,GAAA,EAEjBC,EAAwC,CAC5C,aAAc,KAAK,aACnB,SAAUF,EAAS,SACnB,UAAWA,EAAS,UACpB,SAAUA,EAAS,SACnB,QAASA,EAAS,OAAA,EAIpB,MAAMF,GAAwB,cAAcI,CAAY,EACxD,QAAQ,IAAI,uBAAwB,CAClC,IAAKF,EAAS,SACd,IAAKA,EAAS,UACd,QAASA,EAAS,QAClB,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CAEH,OAASD,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,CAGA,WAAkE,CAChE,MAAO,CACL,WAAY,KAAK,WACjB,aAAc,KAAK,YAAA,CAEvB,CAGA,YAAYJ,EAA0B,CACpC,KAAK,iBAAmBA,EAGpB,KAAK,YAAc,KAAK,aAC1B,cAAc,KAAK,UAAU,EAC7B,KAAK,WAAa,YAAY,SAAY,CACpC,KAAK,YAAc,KAAK,cAC1B,MAAM,KAAK,qBAAA,CAEf,EAAG,KAAK,gBAAgB,EAE5B,CACF,CAGO,MAAMQ,GAAkB,IAAIT,GCnH7BU,GAA2B,IAAM,CACrC,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAyB,IAAI,EAC7D,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1C,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAsB,IAAI,EACtD,CAACR,EAAOa,CAAQ,EAAIL,EAAAA,SAAwB,IAAI,EAEhDM,EAAiB,SAAY,CACjCJ,EAAa,EAAI,EACjBG,EAAS,IAAI,EAEb,GAAI,CACF,MAAME,EAAS,MAAMC,GAAA,EACrBT,EAAeQ,EAAO,SAAS,EAC/BH,EAAa,IAAI,IAAM,EAElBG,EAAO,WACVF,EAASE,EAAO,KAAK,CAEzB,OAASE,EAAU,CACjBV,EAAe,EAAK,EACpBM,EAASI,EAAI,OAAO,EACpBL,EAAa,IAAI,IAAM,CACzB,QAAA,CACEF,EAAa,EAAK,CACpB,CACF,EAEAQ,OAAAA,EAAAA,UAAU,IAAM,CAEdJ,EAAA,CACF,EAAG,CAAA,CAAE,EAGHK,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,qBAAkB,EACtEA,EAAAA,IAAC,SAAA,CACC,QAASN,EACT,SAAUL,EACV,UAAU,4FAET,WAAY,aAAe,YAAA,CAAA,CAC9B,EACF,EAEAU,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAb,IAAgB,KACfc,EAAAA,IAACC,GAAA,CAAY,UAAU,wBAAwB,EAC7Cf,EACFc,EAAAA,IAACE,GAAA,CAAY,UAAU,yBAAyB,EAEhDF,EAAAA,IAACG,GAAA,CAAQ,UAAU,uBAAuB,EAG5CJ,EAAAA,KAAC,MAAA,CAAI,UAAU,SACZ,SAAA,CAAAb,IAAgB,MACfc,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,wBAAqB,EAEnDd,IAAgB,IACfa,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uBAAoB,EAC7DT,GACCQ,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,iBACpBR,EAAU,mBAAA,CAAmB,CAAA,CAC9C,CAAA,EAEJ,EAEDL,IAAgB,IACfa,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,2BAA2B,SAAA,8BAA2B,EAClEpB,GACCoB,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAApB,EAAM,EAEjDW,GACCQ,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,iBACpBR,EAAU,mBAAA,CAAmB,CAAA,CAC9C,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,EACF,EAECL,IAAgB,IACfa,OAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,mBAAgB,EACtED,EAAAA,KAAC,KAAA,CAAG,UAAU,iCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,0CAAA,CAAwC,EAC5CA,EAAAA,IAAC,MAAG,SAAA,mCAAA,CAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,2BAAA,CAAyB,EAC7BA,EAAAA,IAAC,MAAG,SAAA,yCAAA,CAAuC,CAAA,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,EAEJ,CAEJ,EC3FMI,GAAwC,CAAC,CAAE,OAAAC,EAAQ,QAAAC,EAAS,UAAAC,EAAW,MAAAC,KAAY,CACvF,MAAMC,EAAWC,EAAAA,OAAyB,IAAI,EACxCC,EAAYD,EAAAA,OAA0B,IAAI,EAC1CE,EAAYF,EAAAA,OAA2B,IAAI,EAC3C,CAACG,EAAaC,CAAc,EAAI1B,EAAAA,SAAS,EAAK,EAC9C,CAAC2B,EAAYC,CAAa,EAAI5B,EAAAA,SAAiC,MAAM,EAE3EU,EAAAA,UAAU,KACJO,EACFY,EAAA,EAEAC,EAAA,EAGK,IAAM,CACXA,EAAA,CACF,GACC,CAACb,EAAQU,CAAU,CAAC,EAEvB,MAAME,EAAc,SAAY,CAC9B,GAAI,CACF,MAAME,EAAc,CAClB,MAAO,CACL,WAAAJ,EACA,MAAO,CAAE,MAAO,IAAA,EAChB,OAAQ,CAAE,MAAO,GAAA,CAAI,EAEvB,MAAO,EAAA,EAGHK,EAAS,MAAM,UAAU,aAAa,aAAaD,CAAW,EACpEP,EAAU,QAAUQ,EAEhBX,EAAS,UACXA,EAAS,QAAQ,UAAYW,EAC7BX,EAAS,QAAQ,KAAA,EACjBK,EAAe,EAAI,EAEvB,OAASlC,EAAY,CACnB,cAAQ,MAAM,0BAA2BA,CAAK,EACxC,IAAI,MAAM,uCAAuC,CACzD,CACF,EAEMsC,EAAa,IAAM,CACnBN,EAAU,UACZA,EAAU,QAAQ,YAAY,QAAQS,GAASA,EAAM,MAAM,EAC3DT,EAAU,QAAU,MAEtBE,EAAe,EAAK,CACtB,EAEMQ,EAAe,IAAM,CACzB,GAAI,CAACb,EAAS,SAAW,CAACE,EAAU,QAAS,OAE7C,MAAMY,EAAQd,EAAS,QACjBe,EAASb,EAAU,QACnBc,EAAUD,EAAO,WAAW,IAAI,EAEtC,GAAI,CAACC,EAAS,OAGdD,EAAO,MAAQD,EAAM,WACrBC,EAAO,OAASD,EAAM,YAGtBE,EAAQ,UAAUF,EAAO,EAAG,EAAGC,EAAO,MAAOA,EAAO,MAAM,EAG1D,MAAME,EAAYF,EAAO,UAAU,aAAc,EAAG,EAGpDN,EAAA,EACAX,EAAUmB,CAAS,EACnBpB,EAAA,CACF,EAEMqB,EAAe,IAAM,CACzBX,EAAcY,GAAQA,IAAS,OAAS,cAAgB,MAAM,CAChE,EAEA,OAAKvB,QAGF,MAAA,CAAI,UAAU,6EACb,SAAAN,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAoC,SAAAQ,EAAM,EACxDR,EAAAA,IAAC,SAAA,CACC,QAASM,EACT,UAAU,mDAEV,SAAAN,EAAAA,IAAC6B,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAGA9B,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,IAAKS,EACL,UAAU,2BACV,YAAW,GACX,MAAK,EAAA,CAAA,EAIPT,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS2B,EACT,UAAU,wFACV,MAAM,gBAEN,SAAA3B,EAAAA,IAAC8B,GAAA,CAAU,UAAU,SAAA,CAAU,CAAA,CAAA,EAEnC,EAGA9B,EAAAA,IAAC,MAAA,CAAI,UAAU,wDACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAASsB,EACT,SAAU,CAACT,EACX,UAAU,8JAEV,SAAAb,EAAAA,IAAC+B,EAAA,CAAO,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAC5C,CACF,CAAA,EACF,EAGA/B,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBACV,SAAAa,EAAc,2DAA6D,oBAAA,CAC9E,EACF,EAGAb,EAAAA,IAAC,SAAA,CAAO,IAAKW,EAAW,UAAU,QAAA,CAAS,CAAA,CAAA,CAC7C,CAAA,CACF,EA1DkB,IA4DtB,ECvIMqB,GAAsB,IAAM,2DAChC,KAAM,CAAE,KAAAC,CAAA,EAASC,GAAA,EACXC,EAAWC,GAAA,EAGjB,QAAQ,IAAI,0BAA2BH,CAAI,EAC3C,QAAQ,IAAI,gBAAiBA,GAAA,YAAAA,EAAM,IAAI,EACvC,QAAQ,IAAI,cAAeA,GAAA,YAAAA,EAAM,EAAE,EACnC,KAAM,CAACI,EAAyBC,CAA0B,EAAIlD,EAAAA,SAAS,EAAK,EACtE,CAACP,EAAU0D,CAAW,EAAInD,EAAAA,SAAc,IAAI,EAC5C,CAACoD,EAAQC,CAAS,EAAIrD,EAAAA,SAAwB,IAAI,EAClD,CAACsD,EAAiBC,CAAkB,EAAIvD,EAAAA,SAAS,EAAK,EACtD,CAACwD,EAAgBC,CAAiB,EAAIzD,EAAAA,SAAS,EAAK,EACpD0D,EAAcC,GAAA,EAIdC,EAAiB,IAAM,SAC3B,OAAIC,EAAAC,GAAA,YAAAA,EAAkB,SAAlB,MAAAD,EAA0B,YACrB,CACL,KAAM,YACN,QAAS,sCACT,MAAO,QACP,KAAM,GAAA,GAECE,EAAAD,GAAA,YAAAA,EAAkB,SAAlB,MAAAC,EAA0B,YAC5B,CACL,KAAM,WACN,QAAS,+BACT,MAAO,SACP,KAAM,IAAA,EAGD,CACL,KAAM,UACN,QAAS,8BACT,MAAO,OACP,KAAM,IAAA,CAGZ,EAGM,CAAE,KAAMC,EAAgB,MAAOC,GAAoBC,EACvD,gBACA,IAAMC,EAAkB,cAAc,CAAE,WAAYtB,GAAA,YAAAA,EAAM,WAAY,EACtE,CACE,QAAS,CAAC,EAACA,GAAA,MAAAA,EAAM,YACjB,MAAO,EACP,WAAY,IACZ,QAAUrD,GAAe,CACnBA,EAAM,OAAS,iBACjB,QAAQ,MAAM,+BAAgCA,CAAK,CAEvD,CAAA,CACF,EAGI,CAAE,KAAM4E,EAAW,MAAOC,GAAeH,EAC7C,oBACA,IAAMI,GAAa,iBAAiB,CAAE,WAAYzB,GAAA,YAAAA,EAAM,WAAY,EACpE,CACE,QAAS,CAAC,EAACA,GAAA,MAAAA,EAAM,YACjB,MAAO,EACP,WAAY,IACZ,QAAUrD,GAAe,CACnBA,EAAM,OAAS,iBACjB,QAAQ,MAAM,0BAA2BA,CAAK,CAElD,CAAA,CACF,EAGI,CAAE,KAAM+E,EAAe,MAAOC,IAAuBN,EACzD,iBACA,IAAMO,GAAgB,iBAAA,EACtB,CACE,SAAS5B,GAAA,YAAAA,EAAM,QAAS,gBAAiBA,GAAA,YAAAA,EAAM,QAAS,aACxD,MAAO,EACP,WAAY,IACZ,QAAUrD,GAAe,CACnBA,EAAM,OAAS,iBACjB,QAAQ,MAAM,8BAA+BA,CAAK,CAEtD,CAAA,CACF,EAGI,CAAE,KAAMkF,EAAiB,MAAOC,IAAyBT,EAC7D,mBACA,IAAMC,EAAkB,mBAAA,EACxB,CACE,SAAStB,GAAA,YAAAA,EAAM,QAAS,gBAAiBA,GAAA,YAAAA,EAAM,QAAS,aACxD,MAAO,EACP,WAAY,IACZ,QAAUrD,GAAe,CACnBA,EAAM,OAAS,iBACjB,QAAQ,MAAM,gCAAiCA,CAAK,CAExD,CAAA,CACF,EAGI,CAAE,KAAMoF,EAAY,MAAOC,IAAoBX,EACnD,cACA,IAAMI,GAAa,cAAA,EACnB,CACE,SAASzB,GAAA,YAAAA,EAAM,QAAS,gBAAiBA,GAAA,YAAAA,EAAM,QAAS,aACxD,MAAO,EACP,WAAY,IACZ,QAAUrD,GAAe,CACnBA,EAAM,OAAS,iBACjB,QAAQ,MAAM,2BAA4BA,CAAK,CAEnD,CAAA,CACF,EAIIsF,EAAsBC,GAC1BZ,EAAkB,YAClB,CACE,UAAYa,GAAS,CACnBtB,EAAY,kBAAkB,eAAe,EAC7CA,EAAY,kBAAkB,mBAAmB,EAG7CsB,GAAA,MAAAA,EAAM,KACRpF,GAAgB,cAAcoF,EAAK,EAAE,EACrC,QAAQ,IAAI,+CAAgDA,EAAK,EAAE,GAGrEC,EAAM,QAAQ,+DAA+D,EAC7E/B,EAA2B,EAAK,EAChCC,EAAY,IAAI,EAChBE,EAAU,IAAI,CAChB,EACA,QAAU7D,GAAe,SACvB,MAAM0F,IAAenB,GAAAF,EAAArE,EAAM,WAAN,YAAAqE,EAAgB,OAAhB,YAAAE,EAAsB,QAAS,qBAChDmB,EAAa,SAAS,gBAAgB,EACxCD,EAAM,MAAM,4DAA4D,EAC/DC,EAAa,SAAS,8BAA8B,EAC7DD,EAAM,MAAM,wCAAwC,EAEpDA,EAAM,MAAMC,CAAY,CAE5B,CAAA,CACF,EAIIC,EAAuBJ,GAC3BZ,EAAkB,aAClB,CACE,UAAW,IAAM,CACfT,EAAY,kBAAkB,eAAe,EAC7CA,EAAY,kBAAkB,mBAAmB,EAGjD9D,GAAgB,aAAA,EAChB,QAAQ,IAAI,8CAA8C,EAE1DqF,EAAM,QAAQ,iGAAiG,EAC/G/B,EAA2B,EAAK,EAChCC,EAAY,IAAI,EAChBE,EAAU,IAAI,CAChB,EACA,QAAU7D,GAAe,SACvB,MAAM0F,IAAenB,GAAAF,EAAArE,EAAM,WAAN,YAAAqE,EAAgB,OAAhB,YAAAE,EAAsB,QAAS,sBAChDmB,EAAa,SAAS,oBAAoB,EAC5CD,EAAM,MAAM,6CAA6C,EAChDC,EAAa,SAAS,qBAAqB,EACpDD,EAAM,MAAM,sCAAsC,EACzCC,EAAa,SAAS,kBAAkB,EACjDD,EAAM,MAAM,6CAA6C,EAEzDA,EAAM,MAAM,uBAAuBC,CAAY,EAAE,CAErD,CAAA,CACF,EAIFxE,EAAAA,UAAU,IAAM,CACd,GAAI0C,GAAU3D,GAAY,CAACqF,EAAoB,WAAa,CAACK,EAAqB,UAAW,CAC3F,QAAQ,IAAI,qEAAqE,EAEjF,MAAMC,EAAahC,EAAO,OAAS,IAAS,IAAO,IAC7CiC,EAAQ,WAAW,IAAM,CAC7BC,EAAA,CACF,EAAGF,CAAU,EACb,MAAO,IAAM,aAAaC,CAAK,CACjC,CACF,EAAG,CAACjC,EAAQ3D,EAAUqF,EAAoB,UAAWK,EAAqB,SAAS,CAAC,EAGpF,KAAM,CAAE,KAAMrB,CAAA,EAAqBI,EACjC,oBACA,IAAMC,EAAkB,oBAAA,EACxB,CACE,QAAS,CAAC,EAACtB,GAAA,MAAAA,EAAM,YACjB,gBAAiB,IACjB,qBAAsB,GACtB,UAAYmC,GAAS,CACnB,QAAQ,IAAI,iCAAkCA,CAAI,CACpD,CAAA,CACF,EAIIO,EAA8B,SAAY,CAE9C,MAAMC,GAAA,CACR,EAGMA,GAAqB,SAAY,CAErC,GAAI,CACF,MAAMC,EAAM,MAAM/F,GAAA,EAClByD,EAAYsC,CAAG,EACf,QAAQ,IAAI,sCAAuC,CACjD,YAAa,CAAC,CAACA,EACf,aAAcA,CAAA,CACf,EACDR,EAAM,QAAQ,qCAAqC,CACrD,OAASzF,EAAY,CACnB,QAAQ,IAAI,6BAA8BA,CAAK,EAC/CyF,EAAM,MAAMzF,EAAM,SAAW,wBAAwB,EACrD,MACF,CAGAiE,EAAkB,EAAI,CACxB,EAIMiC,GAAuBpD,GAAsB,CACjDe,EAAUf,CAAS,EACnB,QAAQ,IAAI,uCAAwC,CAClD,UAAW,CAAC,CAACA,EACb,cAAcA,GAAA,YAAAA,EAAW,SAAU,CAAA,CACpC,EACD2C,EAAM,QAAQ,kCAAkC,EAGhDxB,EAAkB,EAAK,EAGnBhE,EACFwF,EAAM,6EAA8E,CAAE,KAAM,IAAA,CAAM,EAElGA,EAAM,mDAAoD,CAAE,KAAM,IAAA,CAAM,CAE5E,EAEMK,EAA6B,IAAM,OAEvC,MAAMK,EAAaC,GAAA,EAGnB,QAAQ,IAAI,8BAA+B,CACzC,UAAW,CAAC,CAACxC,EACb,cAAcA,GAAA,YAAAA,EAAQ,SAAU,EAChC,YAAa,CAAC,CAAC3D,EACf,aAAcA,EACd,iBAAkBqE,GAAA,YAAAA,EAAkB,OACpC,KAAAjB,EACA,OAAQA,GAAA,YAAAA,EAAM,GACd,gBAAiBgD,GAAY,gBAAA,CAAgB,CAC9C,EAGD,MAAMC,GAAajC,EAAAC,GAAA,YAAAA,EAAkB,SAAlB,YAAAD,EAA0B,YAG7C,GAAIiC,EAAY,CAEd,GAAI,CAAC1C,EAAQ,CACX6B,EAAM,MAAM,kEAAkE,EAC9E,MACF,CACA,GAAI,CAACxF,EAAU,CACbwF,EAAM,MAAM,8DAA8D,EAC1E,MACF,CACA,QAAQ,IAAI,gEAAgE,CAC9E,KAAO,CAEL,GAAI,CAAC7B,EAAQ,CACX6B,EAAM,MAAM,iEAAiE,EAC7E,MACF,CACA,GAAI,CAACxF,EAAU,CACbwF,EAAM,MAAM,6DAA6D,EACzE,MACF,CACA,QAAQ,IAAI,+DAA+D,CAC7E,CAEA,GAAIa,EAAY,CAEd,MAAMC,EAAe,CACnB,MAAO,OACP,eAAgB3C,GAAU,OAC1B,iBAAkB3D,GAAY,MAAA,EAIhC,QAAQ,IAAI,gCAAiC,CAC3C,UAAW,CAAC,CAAC2D,EACb,cAAcA,GAAA,YAAAA,EAAQ,SAAU,EAChC,eAAeA,GAAA,YAAAA,EAAQ,UAAU,EAAG,KAAM,MAC1C,YAAa,CAAC,CAAC3D,EACf,aAAcA,EACd,aAAAsG,EACA,YAAa,CACX,MAAO,OACP,eAAgB3C,GAAU,OAC1B,iBAAkB3D,GAAY,MAAA,CAChC,CACD,EAEDwF,EAAM,QAAQ,mCAAoC,CAAE,SAAU,IAAM,EACpEE,EAAqB,OAAOY,CAAY,CAC1C,KAAO,CAEL,MAAMC,EAAc,CAClB,SAAU,GACV,MAAO,OACP,cAAe5C,GAAU,OACzB,gBAAiB3D,GAAY,OAC7B,WAAYkG,GAAc,OAC1B,QAAS,IAAA,EAIX,QAAQ,IAAI,+BAAgC,CAC1C,UAAW,CAAC,CAACvC,EACb,cAAcA,GAAA,YAAAA,EAAQ,SAAU,EAChC,eAAeA,GAAA,YAAAA,EAAQ,UAAU,EAAG,KAAM,MAC1C,YAAa,CAAC,CAAC3D,EACf,aAAcA,EACd,YAAAuG,EACA,YAAa,CACX,SAAU,GACV,MAAO,OACP,cAAe5C,GAAU,OACzB,gBAAiB3D,GAAY,OAC7B,WAAYkG,GAAc,OAC1B,QAAS,IAAA,CACX,CACD,EAEDV,EAAM,QAAQ,kCAAmC,CAAE,SAAU,IAAM,EACnEH,EAAoB,OAAOkB,CAAW,CACxC,CACF,EAIMC,GAAUpD,GAAA,YAAAA,EAAM,QAAS,gBAAiBA,GAAA,YAAAA,EAAM,QAAS,aAE/D,OACElC,EAAAA,KAAC,MAAA,CAAI,UAAU,MAEb,SAAA,CAAAC,EAAAA,IAACf,GAAA,EAAe,EAEhBc,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,oCAEtD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,sDAElC,EAGCqF,EAECtF,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,kBAAe,QAC1D,IAAA,CAAE,UAAU,mCACV,UAAA2D,GAAA,YAAAA,EAAe,iBAAkB,CAAA,CACpC,CAAA,EACF,EACA5D,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,eAAY,QACxD,IAAA,CAAE,UAAU,oCACV,UAAA8D,GAAA,YAAAA,EAAiB,eAAgB,CAAA,CACpC,CAAA,EACF,EACA/D,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,iBAAc,QAC3D,IAAA,CAAE,UAAU,qCACV,UAAAgE,GAAA,YAAAA,EAAY,kBAAmB,CAAA,CAClC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAGAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,gBAAa,EACzDA,EAAAA,IAAC,KAAE,UAAU,mCACV,iCAAgB,qBAAM,4BAAa,SAAU,CAAA,CAChD,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,oBAAiB,EAC9DA,EAAAA,IAAC,KAAE,UAAU,oCACV,iCAAW,qBAAM,8BAAe,SAAU,CAAA,CAC7C,CAAA,EACF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,iBAAc,EAC5DA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,iCAAW,qBAAM,8BAAe,OAAQsF,GAAeA,EAAM,SAAW,WAAW,SAAU,CAAA,CAChG,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EAGFvF,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,gBAAa,EACtEA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAqF,EAECtF,OAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,aAAa,EACrC,UAAU,qGACX,SAAA,iBAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,YAAY,EACpC,UAAU,wGACX,SAAA,gBAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,iBAAiB,EACzC,UAAU,wGACX,SAAA,uBAAA,CAAA,GAGAF,GAAA,YAAAA,EAAM,QAAS,eACdlC,EAAAA,KAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,YAAY,EACpC,UAAU,yGACX,SAAA,wBAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,SAAS,EACjC,UAAU,yGACX,SAAA,kBAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,WAAW,EACnC,UAAU,mGACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CAEJ,EAGApC,OAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMsC,EAA2B,EAAI,EAC9C,UAAU,uGACX,SAAA,sBAAA,CAAA,EAGDtC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,gBAAgB,EACxC,UAAU,wGACX,SAAA,oBAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,WAAW,EACnC,UAAU,qGACX,SAAA,eAAA,CAAA,EAGDnC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,UAAU,EAClC,UAAU,wGACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,GAGCF,GAAA,YAAAA,EAAM,QAAS,eACdlC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,uBAAoB,EAC7ED,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,kBAAe,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,6BAA0B,EACtEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,YAAY,EACpC,UAAU,iHACX,SAAA,kBAAA,CAAA,CAED,EACF,EAEApC,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,mBAAgB,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,gCAA6B,EACzEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,SAAS,EACjC,UAAU,iHACX,SAAA,eAAA,CAAA,CAED,EACF,EAEApC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,kBAAe,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,iCAA8B,EACvEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,WAAW,EACnC,UAAU,2GACX,SAAA,eAAA,CAAA,CAED,EACF,EAEApC,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,qBAAkB,EACrEA,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,2BAAwB,EACpEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,UAAU,EAClC,UAAU,iHACX,SAAA,gBAAA,CAAA,CAED,EACF,EAEApC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,qBAAkB,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4BAAyB,EACnEA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,aAAa,EACrC,UAAU,6GACX,SAAA,iBAAA,CAAA,CAED,EACF,EAEApC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,mBAAgB,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,wBAAqB,EAC/DA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMmC,EAAS,QAAQ,EAChC,UAAU,6GACX,SAAA,eAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGFpC,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,gBAAa,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAiB,SAAA,4BAAyB,GACrDqD,GAAmBI,GAAcG,IAAsBG,IAAwBE,KAC/EjE,EAAAA,IAAC,MAAA,CAAI,UAAU,yDACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,8FAEvC,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGCqC,SACE,MAAA,CAAI,UAAU,iFACb,SAAAtC,EAAAA,KAAC,MAAA,CAAI,UAAU,qFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wDACZ,SAAA,CAAAC,EAAAA,IAACwF,EAAA,CAAM,UAAU,cAAA,CAAe,EAAE,iBAAA,EAEpC,EACAxF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACbsC,EAA2B,EAAK,EAChCG,EAAU,IAAI,EACdF,EAAY,IAAI,CAClB,EACA,UAAU,oCAEV,SAAAvC,EAAAA,IAAC6B,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEA9B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAGX,SAAA,EAAA,IAAM,CACN,MAAM0F,EAAczC,EAAA,EACpB,OACEjD,EAAAA,KAAC,MAAA,CAAI,UAAW,gCACd0F,EAAY,QAAU,QAAU,+BAChCA,EAAY,QAAU,SAAW,iCACjC,4BACF,GACE,SAAA,CAAA1F,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,wBACdyF,EAAY,QAAU,QAAU,eAChCA,EAAY,QAAU,SAAW,gBACjC,aACF,GAAI,EACJ1F,EAAAA,KAAC,OAAA,CAAK,UAAU,oCACb,SAAA,CAAA0F,EAAY,KAAK,IAAEA,EAAY,OAAA,CAAA,CAClC,CAAA,EACF,EACCA,EAAY,OAAS,aACpBzF,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6DAAA,CAErC,CAAA,CACF,CAAA,EAEJ,CAEJ,GAAA,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAACwF,EAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCxF,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,wBAAA,CAAsB,CAAA,EACpE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kFAAA,CAErC,CAAA,EACF,EAGC,CAACwC,GAAU,CAAC3D,EACXkB,EAAAA,KAAC,MAAA,CAAI,UAAU,4GACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,MAAC,OAAI,UAAW,mFACd0F,EAAAxC,GAAA,YAAAA,EAAkB,SAAlB,MAAAwC,EAA0B,YACtB,iBACAC,EAAAzC,GAAA,YAAAA,EAAkB,SAAlB,MAAAyC,EAA0B,YAC1B,eACA,aACN,GACE,eAAC5D,EAAA,CAAO,UAAU,uBAAuB,EAC3C,EACA/B,EAAAA,IAAC,KAAA,CAAG,UAAU,wCACX,UAAA4F,EAAA1C,GAAA,YAAAA,EAAkB,SAAlB,MAAA0C,EAA0B,YACvB,0BACAC,EAAA3C,GAAA,YAAAA,EAAkB,SAAlB,MAAA2C,EAA0B,YAC1B,sBACA,qBAEN,EACA7F,EAAAA,IAAC,IAAA,CAAE,UAAU,0BACV,UAAA8F,EAAA5C,GAAA,YAAAA,EAAkB,SAAlB,MAAA4C,EAA0B,YACvB,mDACAC,EAAA7C,GAAA,YAAAA,EAAkB,SAAlB,MAAA6C,EAA0B,YAC1B,gCACA,+BAEN,EACA/F,EAAAA,IAAC,IAAA,CAAE,UAAU,6BACV,UAAAgG,EAAA9C,GAAA,YAAAA,EAAkB,SAAlB,MAAA8C,EAA0B,YACvB,gCACAC,EAAA/C,GAAA,YAAAA,EAAkB,SAAlB,MAAA+C,EAA0B,YAC1B,qDACA,oDAAA,CAEN,CAAA,EACF,EACAjG,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2E,EACT,SAAUjC,KAAmBwD,EAAAhD,GAAA,YAAAA,EAAkB,SAAlB,YAAAgD,EAA0B,aACvD,UAAW,qOACTC,GAAAjD,GAAA,YAAAA,EAAkB,SAAlB,MAAAiD,GAA0B,YACtB,kCACAC,GAAAlD,GAAA,YAAAA,EAAkB,SAAlB,MAAAkD,GAA0B,YAC1B,+HACA,kHACN,GAEC,WACCrG,EAAAA,KAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,MAAA,CAAI,UAAU,2DAAA,CAA4D,EAAM,mBAAA,CAAA,CAEnF,GACEqG,GAAAnD,GAAA,YAAAA,EAAkB,SAAlB,MAAAmD,GAA0B,YAC5BtG,OAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,SAAA,IAAC,EAAM,sBAAA,CAAA,CAElC,EAEAD,EAAAA,KAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC+B,EAAA,CAAO,UAAU,SAAA,CAAU,EAAE,OAC1BuE,GAAApD,GAAA,YAAAA,EAAkB,SAAlB,MAAAoD,GAA0B,YAAc,kBAAoB,gBAAA,CAAA,CAClE,CAAA,CAAA,EAGJvG,EAAAA,KAAC,IAAA,CAAE,UAAU,oEAAoE,SAAA,CAAA,OAC3EwG,GAAArD,GAAA,YAAAA,EAAkB,SAAlB,MAAAqD,GAA0B,YAC1B,2DACA,yDAAA,CAAA,CAEN,CAAA,CAAA,CACF,EAEAxG,EAAAA,KAAAwF,EAAAA,SAAA,CAEG,SAAA,CAAA/C,UACE,MAAA,CACC,SAAA,CAAAxC,EAAAA,IAAC,QAAA,CAAM,UAAU,8BAA8B,SAAA,yBAE/C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,IAAKwC,EACL,IAAI,oBACJ,UAAU,yEAAA,CAAA,EAEZzC,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,CACb0C,EAAU,IAAI,EACdF,EAAY,IAAI,CAClB,EACA,UAAU,6IAEV,SAAA,CAAAvC,EAAAA,IAAC+B,EAAA,CAAO,UAAU,SAAA,CAAU,EAAE,QAAA,CAAA,CAAA,CAEhC,EACF,EAGCS,GAAU3D,GACTmB,EAAAA,IAAC,MAAA,CAAI,UAAU,uGACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,iDAAA,CAAkD,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,2DAE1C,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iDAAA,CAAkD,CAAA,EACnE,EACAA,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS0E,EACT,SAAUR,EAAoB,WAAaK,EAAqB,UAChE,UAAU,2SAET,SAAAL,EAAoB,WAAaK,EAAqB,UACrDxE,OAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAAC,MAAA,CAAI,UAAU,2DAAA,CAA4D,GAC1EwG,GAAAtD,GAAA,YAAAA,EAAkB,SAAlB,MAAAsD,GAA0B,YAAc,kBAAoB,gBAAA,CAAA,CAC/D,EAEAzG,EAAAA,KAAAwF,EAAAA,SAAA,CACE,SAAA,CAAAvF,EAAAA,IAACwF,EAAA,CAAM,UAAU,SAAA,CAAU,GAC1BiB,GAAAvD,GAAA,YAAAA,EAAkB,SAAlB,MAAAuD,GAA0B,YAAc,qBAAuB,mBAAA,CAAA,CAClE,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAID5H,UACE,MAAA,CACC,SAAA,CAAAmB,EAAAA,IAAC,QAAA,CAAM,UAAU,QAAQ,SAAA,kBAAe,QACvC,MAAA,CAAI,UAAU,kDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC0G,GAAA,CAAO,UAAU,wBAAA,CAAyB,EAC3C1G,EAAAA,IAAC,OAAI,UAAU,SACb,eAAC,IAAA,CAAE,UAAU,qCACV,SAAAnB,EAAS,SAAW,GAAGA,EAAS,SAAS,QAAQ,CAAC,CAAC,KAAKA,EAAS,UAAU,QAAQ,CAAC,CAAC,EAAA,CACxF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAID2D,GAAU3D,GACTkB,EAAAA,KAAAwF,EAAAA,SAAA,CAEE,SAAA,CAAAxF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACwF,EAAA,CAAM,UAAU,wBAAA,CAAyB,EAC1CxF,EAAAA,IAAC,OAAA,CAAK,UAAU,qCAAqC,SAAA,qCAAA,CAAmC,CAAA,EAC1F,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,kDAAA,CAE3C,CAAA,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,4DACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0CAAA,CAErC,CAAA,CACF,CAAA,EACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,sBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMsC,EAA2B,EAAK,EAC/C,UAAU,uEACX,SAAA,QAAA,CAAA,EAGDtC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,SAAY,CACnB,GAAI,CACF,MAAM2G,EAAkB,MAAMC,GAAA,EAC1BD,EAAgB,cAClBtC,EAAM,QAAQ,gCAAgC,EAE9CA,EAAM,MAAMsC,EAAgB,OAAO,CAEvC,OAAS/H,EAAY,CACnByF,EAAM,MAAM,uBAAyBzF,EAAM,OAAO,CACpD,CACF,EACA,UAAU,oFACX,SAAA,aAAA,CAAA,EAGDoB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS2E,EACT,SAAUjC,GAAmBwB,EAAoB,WAAaK,EAAqB,UACnF,UAAU,0FAET,WAAkB,eAClBL,EAAoB,UAAY,iBAChCK,EAAqB,UAAY,kBACjC,+BAAA,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAIFvE,EAAAA,IAACI,GAAA,CACC,OAAQwC,EACR,QAAS,IAAMC,EAAkB,EAAK,EACtC,UAAWiC,GACX,OAAO+B,GAAA3D,GAAA,YAAAA,EAAkB,SAAlB,MAAA2D,GAA0B,YAAc,mBAAqB,iBAAA,CAAA,CACtE,EAEF,CAEJ"}