{"version":3,"file":"Dashboard-BMwoJxae.js","sources":["../../src/utils/locationTracker.ts","../../src/components/ConnectionTest.tsx","../../src/components/LiveCamera.tsx","../../src/pages/Dashboard.tsx"],"sourcesContent":["import { locationTrackingService, LocationTrackingRequest } from '../services/locationTrackingService'\r\nimport { getCompleteLocation } from './geolocation'\r\n\r\nexport class LocationTracker {\r\n  private intervalId: number | null = null\r\n  private attendanceId: string | null = null\r\n  private isTracking: boolean = false\r\n  private trackingInterval: number = 30000 // 30 seconds default\r\n\r\n  constructor(intervalMs: number = 30000) {\r\n    this.trackingInterval = intervalMs\r\n  }\r\n\r\n  // Start continuous location tracking\r\n  async startTracking(attendanceId: string): Promise<void> {\r\n    if (this.isTracking) {\r\n      console.log('Location tracking already active')\r\n      return\r\n    }\r\n\r\n    this.attendanceId = attendanceId\r\n    this.isTracking = true\r\n\r\n    console.log('üöÄ Starting location tracking for attendance:', attendanceId)\r\n\r\n    // Track location immediately\r\n    await this.trackCurrentLocation()\r\n\r\n    // Set up interval for continuous tracking\r\n    this.intervalId = setInterval(async () => {\r\n      if (this.isTracking && this.attendanceId) {\r\n        await this.trackCurrentLocation()\r\n      }\r\n    }, this.trackingInterval)\r\n  }\r\n\r\n  // Stop location tracking\r\n  async stopTracking(): Promise<void> {\r\n    if (!this.isTracking || !this.attendanceId) {\r\n      console.log('No active tracking to stop')\r\n      return\r\n    }\r\n\r\n    console.log('üõë Stopping location tracking for attendance:', this.attendanceId)\r\n\r\n    // Clear interval\r\n    if (this.intervalId) {\r\n      clearInterval(this.intervalId)\r\n      this.intervalId = null\r\n    }\r\n\r\n    // Stop tracking on server\r\n    try {\r\n      await locationTrackingService.stopTracking(this.attendanceId)\r\n      console.log('‚úÖ Location tracking stopped successfully')\r\n    } catch (error) {\r\n      console.error('‚ùå Error stopping location tracking:', error)\r\n    }\r\n\r\n    // Reset state\r\n    this.isTracking = false\r\n    this.attendanceId = null\r\n  }\r\n\r\n  // Track current location\r\n  private async trackCurrentLocation(): Promise<void> {\r\n    if (!this.attendanceId) return\r\n\r\n    try {\r\n      // Get current location\r\n      const location = await getCompleteLocation()\r\n      \r\n      const trackingData: LocationTrackingRequest = {\r\n        attendanceId: this.attendanceId,\r\n        latitude: location.latitude,\r\n        longitude: location.longitude,\r\n        accuracy: location.accuracy,\r\n        address: location.address\r\n      }\r\n\r\n      // Send to server\r\n      await locationTrackingService.trackLocation(trackingData)\r\n      console.log('üìç Location tracked:', {\r\n        lat: location.latitude,\r\n        lng: location.longitude,\r\n        address: location.address,\r\n        timestamp: new Date().toISOString()\r\n      })\r\n\r\n    } catch (error) {\r\n      console.error('‚ùå Error tracking location:', error)\r\n    }\r\n  }\r\n\r\n  // Get tracking status\r\n  getStatus(): { isTracking: boolean; attendanceId: string | null } {\r\n    return {\r\n      isTracking: this.isTracking,\r\n      attendanceId: this.attendanceId\r\n    }\r\n  }\r\n\r\n  // Update tracking interval\r\n  setInterval(intervalMs: number): void {\r\n    this.trackingInterval = intervalMs\r\n    \r\n    // If currently tracking, restart with new interval\r\n    if (this.isTracking && this.intervalId) {\r\n      clearInterval(this.intervalId)\r\n      this.intervalId = setInterval(async () => {\r\n        if (this.isTracking && this.attendanceId) {\r\n          await this.trackCurrentLocation()\r\n        }\r\n      }, this.trackingInterval)\r\n    }\r\n  }\r\n}\r\n\r\n// Create a singleton instance\r\nexport const locationTracker = new LocationTracker()\r\n","import React, { useState, useEffect } from 'react'\r\nimport { checkBackendHealth } from '../services/api'\r\nimport { Wifi, WifiOff, AlertCircle, CheckCircle } from 'lucide-react'\r\n\r\nconst ConnectionTest: React.FC = () => {\r\n  const [isConnected, setIsConnected] = useState<boolean | null>(null)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [lastCheck, setLastCheck] = useState<Date | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const testConnection = async () => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n    \r\n    try {\r\n      const result = await checkBackendHealth()\r\n      setIsConnected(result.isHealthy)\r\n      setLastCheck(new Date())\r\n      \r\n      if (!result.isHealthy) {\r\n        setError(result.error)\r\n      }\r\n    } catch (err: any) {\r\n      setIsConnected(false)\r\n      setError(err.message)\r\n      setLastCheck(new Date())\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Test connection on component mount\r\n    testConnection()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-sm border p-4 mb-4\">\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900\">Backend Connection</h3>\r\n        <button\r\n          onClick={testConnection}\r\n          disabled={isLoading}\r\n          className=\"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50\"\r\n        >\r\n          {isLoading ? 'Testing...' : 'Test Again'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-3\">\r\n        {isConnected === null ? (\r\n          <AlertCircle className=\"w-5 h-5 text-gray-400\" />\r\n        ) : isConnected ? (\r\n          <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n        ) : (\r\n          <WifiOff className=\"w-5 h-5 text-red-500\" />\r\n        )}\r\n        \r\n        <div className=\"flex-1\">\r\n          {isConnected === null && (\r\n            <p className=\"text-gray-600\">Testing connection...</p>\r\n          )}\r\n          {isConnected === true && (\r\n            <div>\r\n              <p className=\"text-green-600 font-medium\">‚úÖ Backend is running</p>\r\n              {lastCheck && (\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Last checked: {lastCheck.toLocaleTimeString()}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n          {isConnected === false && (\r\n            <div>\r\n              <p className=\"text-red-600 font-medium\">‚ùå Cannot connect to backend</p>\r\n              {error && (\r\n                <p className=\"text-sm text-red-500 mt-1\">{error}</p>\r\n              )}\r\n              {lastCheck && (\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Last checked: {lastCheck.toLocaleTimeString()}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {isConnected === false && (\r\n        <div className=\"mt-3 p-3 bg-red-50 border border-red-200 rounded\">\r\n          <h4 className=\"text-sm font-medium text-red-800 mb-2\">Troubleshooting:</h4>\r\n          <ul className=\"text-xs text-red-700 space-y-1\">\r\n            <li>‚Ä¢ Check if the backend server is running</li>\r\n            <li>‚Ä¢ Verify your internet connection</li>\r\n            <li>‚Ä¢ Try refreshing the page</li>\r\n            <li>‚Ä¢ Contact support if the issue persists</li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ConnectionTest\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { Camera, X, RotateCcw } from 'lucide-react';\r\n\r\ninterface LiveCameraProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onCapture: (imageData: string) => void;\r\n  title: string;\r\n}\r\n\r\nconst LiveCamera: React.FC<LiveCameraProps> = ({ isOpen, onClose, onCapture, title }) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [facingMode, setFacingMode] = useState<'user' | 'environment'>('user');\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      startCamera();\r\n    } else {\r\n      stopCamera();\r\n    }\r\n\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [isOpen, facingMode]);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const constraints = {\r\n        video: {\r\n          facingMode: facingMode,\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        },\r\n        audio: false\r\n      };\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n      streamRef.current = stream;\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n        setIsStreaming(true);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('‚ùå Camera access failed:', error);\r\n      throw new Error('Camera access denied or not available');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    setIsStreaming(false);\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n\r\n    if (!context) return;\r\n\r\n    // Set canvas dimensions to match video\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    // Draw video frame to canvas\r\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    // Convert to base64\r\n    const imageData = canvas.toDataURL('image/jpeg', 0.8);\r\n    \r\n    // Stop camera and close\r\n    stopCamera();\r\n    onCapture(imageData);\r\n    onClose();\r\n  };\r\n\r\n  const switchCamera = () => {\r\n    setFacingMode(prev => prev === 'user' ? 'environment' : 'user');\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center\">\r\n      <div className=\"relative w-full max-w-md mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-white text-lg font-semibold\">{title}</h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-white hover:text-gray-300 transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Camera View */}\r\n        <div className=\"relative bg-black rounded-lg overflow-hidden\">\r\n          <video\r\n            ref={videoRef}\r\n            className=\"w-full h-64 object-cover\"\r\n            playsInline\r\n            muted\r\n          />\r\n          \r\n          {/* Camera Controls Overlay */}\r\n          <div className=\"absolute top-4 right-4\">\r\n            <button\r\n              onClick={switchCamera}\r\n              className=\"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all\"\r\n              title=\"Switch Camera\"\r\n            >\r\n              <RotateCcw className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Capture Button */}\r\n          <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2\">\r\n            <button\r\n              onClick={capturePhoto}\r\n              disabled={!isStreaming}\r\n              className=\"bg-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n            >\r\n              <Camera className=\"w-8 h-8 text-gray-800\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <div className=\"mt-4 text-center\">\r\n          <p className=\"text-white text-sm\">\r\n            {isStreaming ? 'Position yourself in the frame and tap the camera button' : 'Starting camera...'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Hidden canvas for capture */}\r\n        <canvas ref={canvasRef} className=\"hidden\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveCamera;\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useAuth } from '../hooks/useAuth'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query'\r\nimport { attendanceService } from '../services/attendanceService'\r\nimport { leaveService } from '../services/leaveService'\r\nimport { employeeService } from '../services/employeeService'\r\nimport { authService } from '../services/authService'\r\nimport { Clock, X, MapPin, Camera } from 'lucide-react'\r\nimport toast from 'react-hot-toast'\r\nimport { getCompleteLocation, getDeviceInfo } from '../utils/geolocation'\r\nimport { captureSelfie, compressImage, checkCameraPermissions } from '../utils/camera'\r\nimport { locationTracker } from '../utils/locationTracker'\r\nimport ConnectionTest from '../components/ConnectionTest'\r\nimport LiveCamera from '../components/LiveCamera'\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const { user } = useAuth()\r\n  const navigate = useNavigate()\r\n  \r\n  // Debug user data\r\n  console.log('üë§ Dashboard user data:', user)\r\n  console.log('üîë User role:', user?.role)\r\n  console.log('üÜî User ID:', user?.id)\r\n  const [showSelfAttendanceModal, setShowSelfAttendanceModal] = useState(false)\r\n  const [location, setLocation] = useState<any>(null)\r\n  const [selfie, setSelfie] = useState<string | null>(null)\r\n  const [isAutoCapturing, setIsAutoCapturing] = useState(false)\r\n  const [showLiveCamera, setShowLiveCamera] = useState(false)\r\n  const queryClient = useQueryClient()\r\n\r\n\r\n  // Smart status detection\r\n  const getSmartStatus = () => {\r\n    if (attendanceStatus?.status?.isCompleted) {\r\n      return {\r\n        type: 'completed',\r\n        message: 'üéâ Work day completed successfully!',\r\n        color: 'green',\r\n        icon: '‚úÖ'\r\n      }\r\n    } else if (attendanceStatus?.status?.canCheckOut) {\r\n      return {\r\n        type: 'checkout',\r\n        message: 'üåÜ Ready for smart check-out',\r\n        color: 'orange',\r\n        icon: 'üïê'\r\n      }\r\n    } else {\r\n      return {\r\n        type: 'checkin',\r\n        message: 'üåÖ Ready for smart check-in',\r\n        color: 'blue',\r\n        icon: 'üöÄ'\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Fetch data based on user role with better error handling\r\n  const { data: attendanceData, error: attendanceError } = useQuery(\r\n    'my-attendance',\r\n    () => attendanceService.getAttendance({ employeeId: user?.employeeId }),\r\n    { \r\n      enabled: !!user?.employeeId,\r\n      retry: 2,\r\n      retryDelay: 1000,\r\n      onError: (error: any) => {\r\n        if (error.code !== 'NETWORK_ERROR') {\r\n          console.error('Attendance data fetch error:', error)\r\n        }\r\n      }\r\n    }\r\n  )\r\n  \r\n  const { data: leaveData, error: leaveError } = useQuery(\r\n    'my-leave-requests',\r\n    () => leaveService.getLeaveRequests({ employeeId: user?.employeeId }),\r\n    { \r\n      enabled: !!user?.employeeId,\r\n      retry: 2,\r\n      retryDelay: 1000,\r\n      onError: (error: any) => {\r\n        if (error.code !== 'NETWORK_ERROR') {\r\n          console.error('Leave data fetch error:', error)\r\n        }\r\n      }\r\n    }\r\n  )\r\n  \r\n  const { data: employeeStats, error: employeeStatsError } = useQuery(\r\n    'employee-stats',\r\n    () => employeeService.getEmployeeStats(),\r\n    { \r\n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\r\n      retry: 2,\r\n      retryDelay: 1000,\r\n      onError: (error: any) => {\r\n        if (error.code !== 'NETWORK_ERROR') {\r\n          console.error('Employee stats fetch error:', error)\r\n        }\r\n      }\r\n    }\r\n  )\r\n  \r\n  const { data: attendanceStats, error: attendanceStatsError } = useQuery(\r\n    'attendance-stats',\r\n    () => attendanceService.getAttendanceStats(),\r\n    { \r\n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\r\n      retry: 2,\r\n      retryDelay: 1000,\r\n      onError: (error: any) => {\r\n        if (error.code !== 'NETWORK_ERROR') {\r\n          console.error('Attendance stats fetch error:', error)\r\n        }\r\n      }\r\n    }\r\n  )\r\n  \r\n  const { data: leaveStats, error: leaveStatsError } = useQuery(\r\n    'leave-stats',\r\n    () => leaveService.getLeaveStats(),\r\n    { \r\n      enabled: user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER',\r\n      retry: 2,\r\n      retryDelay: 1000,\r\n      onError: (error: any) => {\r\n        if (error.code !== 'NETWORK_ERROR') {\r\n          console.error('Leave stats fetch error:', error)\r\n        }\r\n      }\r\n    }\r\n  )\r\n\r\n  // Self check-in mutation\r\n  const selfCheckInMutation = useMutation(\r\n    attendanceService.selfCheckIn,\r\n    {\r\n      onSuccess: (data) => {\r\n        queryClient.invalidateQueries('my-attendance')\r\n        queryClient.invalidateQueries('attendance-status')\r\n        \r\n        // Start location tracking after successful check-in\r\n        if (data?.id) {\r\n          locationTracker.startTracking(data.id)\r\n          console.log('üöÄ Location tracking started for attendance:', data.id)\r\n        }\r\n        \r\n        toast.success('‚úÖ Check-in completed successfully! Location tracking started.')\r\n        setShowSelfAttendanceModal(false)\r\n        setLocation(null)\r\n        setSelfie(null)\r\n      },\r\n      onError: (error: any) => {\r\n        const errorMessage = error.response?.data?.error || 'Failed to check in'\r\n        if (errorMessage.includes('already marked')) {\r\n          toast.error('You have already checked in today. Please check out first.')\r\n        } else if (errorMessage.includes('Already completed attendance')) {\r\n          toast.error('Attendance already completed for today')\r\n        } else {\r\n          toast.error(errorMessage)\r\n        }\r\n      }\r\n    }\r\n  )\r\n\r\n  // Self check-out mutation\r\n  const selfCheckOutMutation = useMutation(\r\n    attendanceService.selfCheckOut,\r\n    {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries('my-attendance')\r\n        queryClient.invalidateQueries('attendance-status')\r\n        \r\n        // Stop location tracking after successful check-out\r\n        locationTracker.stopTracking()\r\n        console.log('üõë Location tracking stopped after check-out')\r\n        \r\n        toast.success('‚úÖ Check-out completed successfully! Your attendance has been recorded with selfie and location.')\r\n        setShowSelfAttendanceModal(false)\r\n        setLocation(null)\r\n        setSelfie(null)\r\n      },\r\n      onError: (error: any) => {\r\n        const errorMessage = error.response?.data?.error || 'Failed to check out'\r\n        if (errorMessage.includes('No active check-in')) {\r\n          toast.error('‚ùå Please check in first before checking out')\r\n        } else if (errorMessage.includes('Already checked out')) {\r\n          toast.error('‚ùå You have already checked out today')\r\n        } else if (errorMessage.includes('User ID required')) {\r\n          toast.error('‚ùå Authentication error. Please login again.')\r\n        } else {\r\n          toast.error(`‚ùå Check-out failed: ${errorMessage}`)\r\n        }\r\n      }\r\n    }\r\n  )\r\n\r\n  // Smart auto-submit when both selfie and location are ready\r\n  useEffect(() => {\r\n    if (selfie && location && !selfCheckInMutation.isLoading && !selfCheckOutMutation.isLoading) {\r\n      console.log('üß† Smart system: Both selfie and location ready, auto-submitting...')\r\n      // Smart delay based on data size and network conditions\r\n      const smartDelay = selfie.length > 100000 ? 1000 : 500\r\n      const timer = setTimeout(() => {\r\n        handleAutoSubmitAttendance()\r\n      }, smartDelay)\r\n      return () => clearTimeout(timer)\r\n    }\r\n  }, [selfie, location, selfCheckInMutation.isLoading, selfCheckOutMutation.isLoading])\r\n\r\n  // Get current attendance status\r\n  const { data: attendanceStatus } = useQuery(\r\n    'attendance-status',\r\n    () => attendanceService.getAttendanceStatus(),\r\n    {\r\n      enabled: !!user?.employeeId,\r\n      refetchInterval: 30000, // Refetch every 30 seconds\r\n      refetchOnWindowFocus: true,\r\n      onSuccess: (data) => {\r\n        console.log('üìä Frontend attendance status:', data);\r\n      }\r\n    }\r\n  )\r\n\r\n  // Open live camera for selfie capture\r\n  const handleTakeSelfieAndLocation = async () => {\r\n    // Proceed directly for both check-in and check-out\r\n    await startSelfieCapture()\r\n  }\r\n\r\n  // Start the selfie capture process\r\n  const startSelfieCapture = async () => {\r\n    // First capture location automatically\r\n    try {\r\n      const loc = await getCompleteLocation()\r\n      setLocation(loc)\r\n      console.log('üìç Location captured automatically:', {\r\n        hasLocation: !!loc,\r\n        locationData: loc\r\n      })\r\n      toast.success('üìç Location captured automatically!')\r\n    } catch (error: any) {\r\n      console.log('‚ùå Location capture failed:', error)\r\n      toast.error(error.message || 'Failed to get location')\r\n      return\r\n    }\r\n\r\n    // Then open live camera for selfie\r\n    setShowLiveCamera(true)\r\n  }\r\n\r\n\r\n  // Handle selfie capture from live camera\r\n  const handleSelfieCapture = (imageData: string) => {\r\n    setSelfie(imageData)\r\n    console.log('üì∏ Selfie captured from live camera:', {\r\n      hasSelfie: !!imageData,\r\n      selfieLength: imageData?.length || 0\r\n    })\r\n    toast.success('üì∏ Selfie captured successfully!')\r\n    \r\n    // Close the live camera\r\n    setShowLiveCamera(false)\r\n    \r\n    // Show info about what's happening next\r\n    if (location) {\r\n      toast('‚úÖ Both selfie and location ready! Attendance will be marked automatically.', { icon: '‚ÑπÔ∏è' })\r\n    } else {\r\n      toast('üìç Selfie captured! Waiting for location data...', { icon: '‚ÑπÔ∏è' })\r\n    }\r\n  }\r\n\r\n  const handleAutoSubmitAttendance = () => {\r\n    // Get device info\r\n    const deviceInfo = getDeviceInfo()\r\n    \r\n    // Debug current state\r\n    console.log('üîç Auto-submit state check:', {\r\n      hasSelfie: !!selfie,\r\n      selfieLength: selfie?.length || 0,\r\n      hasLocation: !!location,\r\n      locationData: location,\r\n      attendanceStatus: attendanceStatus?.status,\r\n      user: user,\r\n      userId: user?.id,\r\n      isAuthenticated: authService.isAuthenticated()\r\n    })\r\n    \r\n    // Determine if this is check-in or check-out based on current status\r\n    const isCheckOut = attendanceStatus?.status?.canCheckOut\r\n    \r\n    // Enhanced validation for check-out requirements\r\n    if (isCheckOut) {\r\n      // Check-out specific validation\r\n      if (!selfie) {\r\n        toast.error('‚ùå Check-out requires a selfie. Please capture your selfie first.')\r\n        return\r\n      }\r\n      if (!location) {\r\n        toast.error('‚ùå Check-out requires location. Please allow location access.')\r\n        return\r\n      }\r\n      console.log('‚úÖ Check-out requirements validated: Selfie + Location captured')\r\n    } else {\r\n      // Check-in specific validation\r\n      if (!selfie) {\r\n        toast.error('‚ùå Check-in requires a selfie. Please capture your selfie first.')\r\n        return\r\n      }\r\n      if (!location) {\r\n        toast.error('‚ùå Check-in requires location. Please allow location access.')\r\n        return\r\n      }\r\n      console.log('‚úÖ Check-in requirements validated: Selfie + Location captured')\r\n    }\r\n    \r\n    if (isCheckOut) {\r\n      // Check-out flow\r\n      const checkOutData = {\r\n        notes: undefined, // No notes field\r\n        checkOutSelfie: selfie || undefined,\r\n        checkOutLocation: location || undefined\r\n      }\r\n      \r\n      // Debug logging\r\n      console.log('üîç Check-out data being sent:', {\r\n        hasSelfie: !!selfie,\r\n        selfieLength: selfie?.length || 0,\r\n        selfiePreview: selfie?.substring(0, 50) + '...',\r\n        hasLocation: !!location,\r\n        locationData: location,\r\n        checkOutData,\r\n        fullPayload: {\r\n          notes: undefined,\r\n          checkOutSelfie: selfie || undefined,\r\n          checkOutLocation: location || undefined\r\n        }\r\n      })\r\n      \r\n      toast.loading('üéØ Automatically checking out...', { duration: 2000 })\r\n      selfCheckOutMutation.mutate(checkOutData)\r\n    } else {\r\n      // Check-in flow\r\n      const checkInData = {\r\n        isRemote: false, // Default to false, no user input needed\r\n        notes: undefined, // No notes field\r\n        checkInSelfie: selfie || undefined,\r\n        checkInLocation: location || undefined,\r\n        deviceInfo: deviceInfo || undefined,\r\n        shiftId: null\r\n      }\r\n      \r\n      // Debug logging\r\n      console.log('üîç Check-in data being sent:', {\r\n        hasSelfie: !!selfie,\r\n        selfieLength: selfie?.length || 0,\r\n        selfiePreview: selfie?.substring(0, 50) + '...',\r\n        hasLocation: !!location,\r\n        locationData: location,\r\n        checkInData,\r\n        fullPayload: {\r\n          isRemote: false,\r\n          notes: undefined,\r\n          checkInSelfie: selfie || undefined,\r\n          checkInLocation: location || undefined,\r\n          deviceInfo: deviceInfo || undefined,\r\n          shiftId: null\r\n        }\r\n      })\r\n      \r\n      toast.loading('üéØ Automatically checking in...', { duration: 2000 })\r\n      selfCheckInMutation.mutate(checkInData)\r\n    }\r\n  }\r\n\r\n\r\n  // Check if user is admin/HR\r\n  const isAdmin = user?.role === 'SUPER_ADMIN' || user?.role === 'HR_MANAGER'\r\n  \r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Connection Test Component */}\r\n      <ConnectionTest />\r\n      \r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\r\n          üéâ Dashboard Loaded Successfully!\r\n        </h1>\r\n        <p className=\"text-gray-600 mb-6\">\r\n          Welcome to the Employee Attendance System Dashboard\r\n        </p>\r\n        \r\n        {/* Role-based content */}\r\n        {isAdmin ? (\r\n          // Admin/HR Dashboard\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-blue-900\">Total Employees</h3>\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {employeeStats?.totalEmployees || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-green-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-green-900\">Active Today</h3>\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {attendanceStats?.presentCount || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-purple-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-purple-900\">Pending Leaves</h3>\r\n              <p className=\"text-2xl font-bold text-purple-600\">\r\n                {leaveStats?.pendingRequests || 0}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // Employee Dashboard\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-blue-900\">My Attendance</h3>\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {attendanceData?.data?.attendances?.length || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-green-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-green-900\">My Leave Requests</h3>\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {leaveData?.data?.leaveRequests?.length || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-purple-50 p-4 rounded-lg\">\r\n              <h3 className=\"font-semibold text-purple-900\">Pending Leaves</h3>\r\n              <p className=\"text-2xl font-bold text-purple-600\">\r\n                {leaveData?.data?.leaveRequests?.filter((leave: any) => leave.status === 'PENDING').length || 0}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"mt-8\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Quick Actions</h2>\r\n          <div className=\"space-y-2\">\r\n            {isAdmin ? (\r\n              // Admin actions\r\n              <>\r\n                <button \r\n                  onClick={() => navigate('/attendance')}\r\n                  className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors cursor-pointer\"\r\n                >\r\n                  Mark Attendance\r\n                </button>\r\n                <button \r\n                  onClick={() => navigate('/employees')}\r\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\r\n                >\r\n                  View Employees\r\n                </button>\r\n                <button \r\n                  onClick={() => navigate('/leave-requests')}\r\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\r\n                >\r\n                  Manage Leave Requests\r\n                </button>\r\n                {user?.role === 'SUPER_ADMIN' && (\r\n                  <>\r\n                    <button \r\n                      onClick={() => navigate('/employees')}\r\n                      className=\"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors cursor-pointer\"\r\n                    >\r\n                      User & Role Management\r\n                    </button>\r\n                    <button \r\n                      onClick={() => navigate('/shifts')}\r\n                      className=\"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 transition-colors cursor-pointer\"\r\n                    >\r\n                      Shift Management\r\n                    </button>\r\n                    <button \r\n                      onClick={() => navigate('/settings')}\r\n                      className=\"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors cursor-pointer\"\r\n                    >\r\n                      System Settings\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </>\r\n            ) : (\r\n              // Employee actions\r\n              <>\r\n                <button \r\n                  onClick={() => setShowSelfAttendanceModal(true)}\r\n                  className=\"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors cursor-pointer\"\r\n                >\r\n                  Mark Self Attendance\r\n                </button>\r\n                <button \r\n                  onClick={() => navigate('/my-attendance')}\r\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\r\n                >\r\n                  View My Attendance\r\n                </button>\r\n                <button \r\n                  onClick={() => navigate('/my-leave')}\r\n                  className=\"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors cursor-pointer\"\r\n                >\r\n                  Request Leave\r\n                </button>\r\n                <button \r\n                  onClick={() => navigate('/profile')}\r\n                  className=\"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition-colors cursor-pointer\"\r\n                >\r\n                  View My Profile\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Super Admin Features */}\r\n        {user?.role === 'SUPER_ADMIN' && (\r\n          <div className=\"mt-8\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Super Admin Features</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n                <h3 className=\"font-semibold text-purple-900 mb-2\">User Management</h3>\r\n                <p className=\"text-sm text-purple-700 mb-3\">Manage employees and users</p>\r\n                <button \r\n                  onClick={() => navigate('/employees')}\r\n                  className=\"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  Manage Employees\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200\">\r\n                <h3 className=\"font-semibold text-orange-900 mb-2\">Shift Management</h3>\r\n                <p className=\"text-sm text-orange-700 mb-3\">Create and manage work shifts</p>\r\n                <button \r\n                  onClick={() => navigate('/shifts')}\r\n                  className=\"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  Manage Shifts\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\r\n                <h3 className=\"font-semibold text-red-900 mb-2\">System Settings</h3>\r\n                <p className=\"text-sm text-red-700 mb-3\">Configure system-wide settings</p>\r\n                <button \r\n                  onClick={() => navigate('/settings')}\r\n                  className=\"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  System Config\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"bg-indigo-50 p-4 rounded-lg border border-indigo-200\">\r\n                <h3 className=\"font-semibold text-indigo-900 mb-2\">Payroll Management</h3>\r\n                <p className=\"text-sm text-indigo-700 mb-3\">Manage employee salaries</p>\r\n                <button \r\n                  onClick={() => navigate('/payroll')}\r\n                  className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  Manage Payroll\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"bg-teal-50 p-4 rounded-lg border border-teal-200\">\r\n                <h3 className=\"font-semibold text-teal-900 mb-2\">Attendance Reports</h3>\r\n                <p className=\"text-sm text-teal-700 mb-3\">View attendance analytics</p>\r\n                <button \r\n                  onClick={() => navigate('/attendance')}\r\n                  className=\"w-full bg-teal-600 text-white py-2 px-4 rounded hover:bg-teal-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  View Attendance\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"bg-pink-50 p-4 rounded-lg border border-pink-200\">\r\n                <h3 className=\"font-semibold text-pink-900 mb-2\">Leave Management</h3>\r\n                <p className=\"text-sm text-pink-700 mb-3\">Manage leave requests</p>\r\n                <button \r\n                  onClick={() => navigate('/leave')}\r\n                  className=\"w-full bg-pink-600 text-white py-2 px-4 rounded hover:bg-pink-700 text-sm transition-colors cursor-pointer\"\r\n                >\r\n                  Manage Leaves\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"mt-8 p-4 bg-green-50 rounded-lg\">\r\n          <h3 className=\"font-semibold text-green-900\">System Status</h3>\r\n          <p className=\"text-green-700\">‚úÖ All systems operational</p>\r\n          {(attendanceError || leaveError || employeeStatsError || attendanceStatsError || leaveStatsError) && (\r\n            <div className=\"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded\">\r\n              <p className=\"text-yellow-800 text-sm\">\r\n                ‚ö†Ô∏è Some data may not be up to date due to network issues. Please refresh the page.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Self-Attendance Modal */}\r\n      {showSelfAttendanceModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg shadow-lg w-full max-w-lg mx-auto max-h-[95vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 flex items-center\">\r\n                <Clock className=\"w-5 h-5 mr-2\" />\r\n                Mark Attendance\r\n              </h2>\r\n              <button\r\n                onClick={() => {\r\n                  setShowSelfAttendanceModal(false)\r\n                  setSelfie(null)\r\n                  setLocation(null)\r\n                }}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Automatic Data Capture Notice */}\r\n              {/* Smart Attendance Status Indicator */}\r\n              {(() => {\r\n                const smartStatus = getSmartStatus()\r\n                return (\r\n                  <div className={`mb-6 p-4 rounded-lg border-2 ${\r\n                    smartStatus.color === 'green' ? 'bg-green-50 border-green-200' :\r\n                    smartStatus.color === 'orange' ? 'bg-orange-50 border-orange-200' :\r\n                    'bg-blue-50 border-blue-200'\r\n                  }`}>\r\n                    <div className=\"flex items-center justify-center gap-3\">\r\n                      <div className={`w-4 h-4 rounded-full ${\r\n                        smartStatus.color === 'green' ? 'bg-green-500' :\r\n                        smartStatus.color === 'orange' ? 'bg-orange-500' :\r\n                        'bg-blue-500'\r\n                      }`}></div>\r\n                      <span className=\"text-sm font-medium text-gray-700\">\r\n                        {smartStatus.icon} {smartStatus.message}\r\n                      </span>\r\n                    </div>\r\n                    {smartStatus.type !== 'completed' && (\r\n                      <div className=\"mt-2 text-center\">\r\n                        <p className=\"text-xs text-gray-600\">\r\n                          üß† Smart system will handle location + selfie automatically\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )\r\n              })()}\r\n\r\n              <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Clock className=\"h-5 w-5 text-blue-600\" />\r\n                  <span className=\"font-medium text-blue-800\">Automatic Data Capture</span>\r\n                </div>\r\n                <p className=\"text-sm text-blue-700\">\r\n                  Date, time, and status will be automatically captured when you take your selfie.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Phase 2: Selfie & Location Capture */}\r\n              {!selfie && !location ? (\r\n                <div className=\"p-8 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 border-2 border-blue-400 rounded-xl shadow-md\">\r\n                  <div className=\"text-center mb-6\">\r\n                    <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ${\r\n                      attendanceStatus?.status?.canCheckOut \r\n                        ? 'bg-orange-600' \r\n                        : attendanceStatus?.status?.isCompleted\r\n                        ? 'bg-green-600'\r\n                        : 'bg-blue-600'\r\n                    }`}>\r\n                      <Camera className=\"w-10 h-10 text-white\" />\r\n                    </div>\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                      {attendanceStatus?.status?.isCompleted \r\n                        ? '‚úÖ Attendance Completed' \r\n                        : attendanceStatus?.status?.canCheckOut \r\n                        ? 'üì∏ Check-Out Selfie' \r\n                        : 'üì∏ Check-In Selfie'\r\n                      }\r\n                    </h3>\r\n                    <p className=\"text-base text-gray-700\">\r\n                      {attendanceStatus?.status?.isCompleted \r\n                        ? 'üéâ You have completed your attendance for today'\r\n                        : attendanceStatus?.status?.canCheckOut \r\n                        ? 'üåÜ Take your check-out selfie' \r\n                        : 'üåÖ Take your check-in selfie'\r\n                      }\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-600 mt-2\">\r\n                      {attendanceStatus?.status?.isCompleted \r\n                        ? 'Great job! See you tomorrow.'\r\n                        : attendanceStatus?.status?.canCheckOut\r\n                        ? 'üåÜ One-click smart checkout with selfie & location'\r\n                        : 'üåÖ One-click smart check-in with selfie & location'\r\n                      }\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleTakeSelfieAndLocation}\r\n                    disabled={isAutoCapturing || attendanceStatus?.status?.isCompleted}\r\n                    className={`w-full flex items-center justify-center gap-3 px-8 py-4 text-white text-xl font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed shadow-xl transform transition-all duration-300 hover:scale-105 hover:shadow-2xl ${\r\n                      attendanceStatus?.status?.isCompleted\r\n                        ? 'bg-gray-500 cursor-not-allowed'\r\n                        : attendanceStatus?.status?.canCheckOut\r\n                        ? 'bg-gradient-to-r from-orange-500 via-orange-600 to-orange-700 hover:from-orange-600 hover:via-orange-700 hover:to-orange-800'\r\n                        : 'bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:from-blue-600 hover:via-blue-700 hover:to-blue-800'\r\n                    }`}\r\n                  >\r\n                    {isAutoCapturing ? (\r\n                      <>\r\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\r\n                        Opening Camera...\r\n                      </>\r\n                    ) : attendanceStatus?.status?.isCompleted ? (\r\n                      <>\r\n                        <div className=\"w-6 h-6\">‚úÖ</div>\r\n                        Attendance Completed\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Camera className=\"w-6 h-6\" />\r\n                        üì∏ {attendanceStatus?.status?.canCheckOut ? 'Smart Check-Out' : 'Smart Check-In'}\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                  <p className=\"text-xs text-gray-600 mt-4 text-center bg-white/50 p-3 rounded-lg\">\r\n                    ‚ÑπÔ∏è {attendanceStatus?.status?.canCheckOut \r\n                      ? 'Smart Check-Out: Automatic location + live camera selfie'\r\n                      : 'Smart Check-In: Automatic location + live camera selfie'\r\n                    }\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {/* Show captured selfie */}\r\n                  {selfie && (\r\n                    <div>\r\n                      <label className=\"label text-lg font-semibold\">\r\n                        üì∏ Attendance Selfie ‚úÖ\r\n                      </label>\r\n                      <div className=\"relative\">\r\n                        <img \r\n                          src={selfie} \r\n                          alt=\"Attendance Selfie\" \r\n                          className=\"w-full h-80 object-cover rounded-xl border-4 border-green-500 shadow-lg\"\r\n                        />\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => {\r\n                            setSelfie(null)\r\n                            setLocation(null)\r\n                          }}\r\n                          className=\"absolute top-3 right-3 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2 shadow-lg\"\r\n                        >\r\n                          <Camera className=\"w-5 h-5\" />\r\n                          Retake\r\n                        </button>\r\n                      </div>\r\n                      \r\n                      {/* Smart Manual Submit Button */}\r\n                      {selfie && location && (\r\n                        <div className=\"mt-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg shadow-lg\">\r\n                          <div className=\"text-center\">\r\n                            <div className=\"flex items-center justify-center gap-2 mb-3\">\r\n                              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n                              <p className=\"text-green-800 font-medium\">\r\n                                üß† Smart system ready! Both selfie and location captured\r\n                              </p>\r\n                              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n                            </div>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={handleAutoSubmitAttendance}\r\n                              disabled={selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading}\r\n                              className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-lg font-bold text-lg hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 shadow-lg transform transition-all duration-300 hover:scale-105\"\r\n                            >\r\n                              {selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading ? (\r\n                                <>\r\n                                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\r\n                                  {attendanceStatus?.status?.canCheckOut ? 'Checking Out...' : 'Checking In...'}\r\n                                </>\r\n                              ) : (\r\n                                <>\r\n                                  <Clock className=\"w-6 h-6\" />\r\n                                  {attendanceStatus?.status?.canCheckOut ? 'Complete Check-Out' : 'Complete Check-In'}\r\n                                </>\r\n                              )}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Show captured location */}\r\n                  {location && (\r\n                    <div>\r\n                      <label className=\"label\">Your Location ‚úÖ</label>\r\n                      <div className=\"p-3 bg-green-50 border border-green-200 rounded\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <MapPin className=\"w-4 h-4 text-green-600\" />\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"text-sm font-medium text-green-900\">\r\n                              {location.address || `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              {/* Show confirmation only after selfie is captured */}\r\n              {selfie && location && (\r\n                <>\r\n                  {/* Automatic time capture notice */}\r\n                  <div className=\"p-3 bg-green-50 rounded-lg border border-green-200\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-green-600\" />\r\n                      <span className=\"text-sm font-medium text-green-800\">Time will be automatically captured</span>\r\n                    </div>\r\n                    <p className=\"text-xs text-green-700 mt-1\">\r\n                      Current time will be used for check-in/check-out\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Info Badge */}\r\n                  <div className=\"p-2 bg-blue-50 border border-blue-200 rounded text-center\">\r\n                    <p className=\"text-xs text-blue-700\">\r\n                      ‚úÖ Selfie, Location, Device & IP captured\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              )}\r\n              \r\n              <div className=\"flex space-x-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowSelfAttendanceModal(false)}\r\n                  className=\"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={async () => {\r\n                    try {\r\n                      const permissionCheck = await checkCameraPermissions()\r\n                      if (permissionCheck.hasPermission) {\r\n                        toast.success('‚úÖ Camera is working perfectly!')\r\n                      } else {\r\n                        toast.error(permissionCheck.message)\r\n                      }\r\n                    } catch (error: any) {\r\n                      toast.error('Camera test failed: ' + error.message)\r\n                    }\r\n                  }}\r\n                  className=\"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors mr-2\"\r\n                >\r\n                  Test Camera\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleTakeSelfieAndLocation}\r\n                  disabled={isAutoCapturing || selfCheckInMutation.isLoading || selfCheckOutMutation.isLoading}\r\n                  className=\"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 disabled:opacity-50\"\r\n                >\r\n                  {isAutoCapturing ? 'Capturing...' : \r\n                   selfCheckInMutation.isLoading ? 'Checking In...' :\r\n                   selfCheckOutMutation.isLoading ? 'Checking Out...' :\r\n                   'Take Selfie & Mark Attendance'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Live Camera Component */}\r\n      <LiveCamera\r\n        isOpen={showLiveCamera}\r\n        onClose={() => setShowLiveCamera(false)}\r\n        onCapture={handleSelfieCapture}\r\n        title={attendanceStatus?.status?.canCheckOut ? 'Check-Out Selfie' : 'Check-In Selfie'}\r\n      />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard\r\n\r\n"],"names":["LocationTracker","intervalMs","__publicField","attendanceId","locationTrackingService","error","location","getCompleteLocation","trackingData","locationTracker","ConnectionTest","isConnected","setIsConnected","useState","isLoading","setIsLoading","lastCheck","setLastCheck","setError","testConnection","result","checkBackendHealth","err","useEffect","jsxs","jsx","AlertCircle","CheckCircle","WifiOff","LiveCamera","isOpen","onClose","onCapture","title","videoRef","useRef","canvasRef","streamRef","isStreaming","setIsStreaming","facingMode","setFacingMode","startCamera","stopCamera","constraints","stream","track","capturePhoto","video","canvas","context","imageData","switchCamera","prev","X","RotateCcw","Camera","Dashboard","user","useAuth","navigate","useNavigate","showSelfAttendanceModal","setShowSelfAttendanceModal","setLocation","selfie","setSelfie","isAutoCapturing","setIsAutoCapturing","showLiveCamera","setShowLiveCamera","queryClient","useQueryClient","getSmartStatus","_a","attendanceStatus","_b","attendanceData","attendanceError","useQuery","attendanceService","leaveData","leaveError","leaveService","employeeStats","employeeStatsError","employeeService","attendanceStats","attendanceStatsError","leaveStats","leaveStatsError","selfCheckInMutation","useMutation","data","toast","errorMessage","selfCheckOutMutation","smartDelay","timer","handleAutoSubmitAttendance","handleTakeSelfieAndLocation","startSelfieCapture","loc","handleSelfieCapture","deviceInfo","getDeviceInfo","authService","isCheckOut","checkOutData","checkInData","isAdmin","leave","Fragment","Clock","smartStatus","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","_u","_v","MapPin","permissionCheck","checkCameraPermissions","_w"],"mappings":"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"}