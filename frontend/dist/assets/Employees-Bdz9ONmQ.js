import{j as e,a as O}from"./index-CJqNwkMI.js";import{r as j}from"./router-BXhMSvr3.js";import{u as R,a as H,b as w}from"./query-DSXC375t.js";import{e as f}from"./employeeService-CK3_iFt-.js";import{P as L,S as U,c as z,U as Q,E as _,d as W,T as $,z as x}from"./ui-CenJk824.js";import"./vendor-C8w-UNLI.js";import"./utils-ngrFHoWO.js";const te=()=>{var E,C;const[l,p]=j.useState(!1),[t,s]=j.useState(!1),[n,o]=j.useState(!1),[a,c]=j.useState(null),[m,u]=j.useState(""),[h,N]=j.useState(""),[r,d]=j.useState(""),v=R(),{data:y,isLoading:T,error:M}=H(["employees",m,h,r],()=>f.getEmployees({search:m,department:h,status:r})),F=w(f.deleteEmployee,{onSuccess:()=>{v.invalidateQueries("employees"),x.success("Employee deleted successfully")},onError:i=>{var b,g;x.error(((g=(b=i.response)==null?void 0:b.data)==null?void 0:g.error)||"Failed to delete employee")}}),P=i=>{window.confirm("Are you sure you want to delete this employee?")&&F.mutate(i)},V=i=>{c(i),s(!0)},q=i=>{c(i),o(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Employees"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee information and details"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"btn btn-primary btn-md",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Employee"]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search employees...",className:"input pl-10",value:m,onChange:i=>u(i.target.value)})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"input",value:h,onChange:i=>N(i.target.value),children:[e.jsx("option",{value:"",children:"All Departments"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Marketing",children:"Marketing"}),e.jsx("option",{value:"Operations",children:"Operations"})]}),e.jsxs("select",{className:"input",value:r,onChange:i=>d(i.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ON_LEAVE",children:"On Leave"})]}),e.jsxs("button",{className:"btn btn-outline btn-md",onClick:()=>{u(""),N(""),d("")},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Employee List"})}),e.jsx("div",{className:"p-6",children:T?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading employees..."})]}):M?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-600",children:"Error loading employees"})}):(C=(E=y==null?void 0:y.data)==null?void 0:E.employees)!=null&&C.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.data.employees.map(i=>{var b,g,S,I,D,k,A;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-medium",children:[(g=(b=i.user)==null?void 0:b.firstName)==null?void 0:g.charAt(0),(I=(S=i.user)==null?void 0:S.lastName)==null?void 0:I.charAt(0)]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(D=i.user)==null?void 0:D.firstName," ",(k=i.user)==null?void 0:k.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:(A=i.user)==null?void 0:A.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.department||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.position||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i.status==="ACTIVE"?"bg-green-100 text-green-800":i.status==="INACTIVE"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:i.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>V(i),className:"text-blue-600 hover:text-blue-900",title:"View Employee",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>q(i),className:"text-indigo-600 hover:text-indigo-900",title:"Edit Employee",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(i.id),className:"text-red-600 hover:text-red-900",title:"Delete Employee",children:e.jsx($,{className:"h-4 w-4"})})]})})]},i.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first employee"}),e.jsxs("button",{onClick:()=>p(!0),className:"btn btn-primary btn-md",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Employee"]})]})})]}),l&&e.jsx(G,{onClose:()=>p(!1),onSuccess:()=>{p(!1),v.invalidateQueries("employees")}}),t&&a&&e.jsx(X,{employee:a,onClose:()=>{s(!1),c(null)}}),n&&a&&e.jsx(Y,{employee:a,onClose:()=>{o(!1),c(null)},onSuccess:()=>{o(!1),c(null),v.invalidateQueries("employees")}})]})},G=({onClose:l,onSuccess:p})=>{const[t,s]=j.useState({email:"",password:"",firstName:"",lastName:"",phone:"",employeeId:"",department:"",position:"",hireDate:"",salary:"",workLocation:""}),n=w(async a=>{var c,m,u,h,N,r;try{const d=await O.register({email:a.email,password:a.password,firstName:a.firstName,lastName:a.lastName,phone:a.phone||void 0,role:"EMPLOYEE"});return f.createEmployee({userId:d.user.id,employeeId:a.employeeId,department:a.department,position:a.position,hireDate:a.hireDate,salary:a.salary?parseFloat(a.salary):void 0,workLocation:a.workLocation})}catch(d){throw console.error("Employee creation error:",d),((m=(c=d.response)==null?void 0:c.data)==null?void 0:m.code)==="USER_EXISTS"?new Error("User with this email already exists. Please use a different email."):((h=(u=d.response)==null?void 0:u.data)==null?void 0:h.code)==="VALIDATION_ERROR"?new Error(d.response.data.error||"Validation failed. Please check your input."):new Error(((r=(N=d.response)==null?void 0:N.data)==null?void 0:r.error)||d.message||"Failed to create employee")}},{onSuccess:()=>{x.success("Employee created successfully!"),p()},onError:a=>{console.error("Employee creation failed:",a),x.error(a.message||"Failed to create employee")}}),o=a=>{if(a.preventDefault(),!t.email||!t.password||!t.firstName||!t.lastName||!t.employeeId||!t.hireDate||!t.workLocation){x.error("Please fill in all required fields");return}if(t.phone&&t.phone.length<10){x.error("Please enter a valid phone number (at least 10 digits)");return}if(t.password.length<6){x.error("Password must be at least 6 characters long");return}if(!t.email.includes("@")){x.error("Please enter a valid email address");return}n.mutate(t)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Employee"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email *"}),e.jsx("input",{type:"email",className:"input",value:t.email,onChange:a=>s({...t,email:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Password *"}),e.jsx("input",{type:"password",className:"input",value:t.password,onChange:a=>s({...t,password:a.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"First Name *"}),e.jsx("input",{type:"text",className:"input",value:t.firstName,onChange:a=>s({...t,firstName:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Last Name *"}),e.jsx("input",{type:"text",className:"input",value:t.lastName,onChange:a=>s({...t,lastName:a.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("input",{type:"tel",className:"input",value:t.phone,onChange:a=>s({...t,phone:a.target.value}),placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Employee ID *"}),e.jsx("input",{type:"text",className:"input",value:t.employeeId,onChange:a=>s({...t,employeeId:a.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Department"}),e.jsxs("select",{className:"input",value:t.department,onChange:a=>s({...t,department:a.target.value}),children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Marketing",children:"Marketing"}),e.jsx("option",{value:"Operations",children:"Operations"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Position"}),e.jsx("input",{type:"text",className:"input",value:t.position,onChange:a=>s({...t,position:a.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary"}),e.jsx("input",{type:"number",className:"input",value:t.salary,onChange:a=>s({...t,salary:a.target.value}),placeholder:"Enter salary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Work Location *"}),e.jsx("input",{type:"text",className:"input",value:t.workLocation,onChange:a=>s({...t,workLocation:a.target.value}),placeholder:"Enter work location",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Hire Date *"}),e.jsx("input",{type:"date",className:"input",value:t.hireDate,onChange:a=>s({...t,hireDate:a.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"btn btn-outline btn-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n.isLoading,className:"btn btn-primary btn-md disabled:opacity-50 disabled:cursor-not-allowed",children:n.isLoading?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Employee"})]})]})]})})},X=({employee:l,onClose:p})=>{var t,s,n,o,a,c,m,u;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Employee Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-medium text-xl",children:[(s=(t=l.user)==null?void 0:t.firstName)==null?void 0:s.charAt(0),(o=(n=l.user)==null?void 0:n.lastName)==null?void 0:o.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[(a=l.user)==null?void 0:a.firstName," ",(c=l.user)==null?void 0:c.lastName]}),e.jsx("p",{className:"text-gray-600",children:(m=l.user)==null?void 0:m.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:((u=l.user)==null?void 0:u.phone)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:l.employeeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:l.department||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Position"}),e.jsx("p",{className:"text-gray-900",children:l.position||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l.status==="ACTIVE"?"bg-green-100 text-green-800":l.status==="INACTIVE"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:l.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Work Location"}),e.jsx("p",{className:"text-gray-900",children:l.workLocation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Hire Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(l.hireDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary"}),e.jsx("p",{className:"text-gray-900",children:l.salary?`₹${l.salary}`:"N/A"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:p,className:"btn btn-outline btn-md",children:"Close"})})]})]})})},Y=({employee:l,onClose:p,onSuccess:t})=>{var c,m,u,h,N;const[s,n]=j.useState({firstName:((c=l.user)==null?void 0:c.firstName)||"",lastName:((m=l.user)==null?void 0:m.lastName)||"",email:((u=l.user)==null?void 0:u.email)||"",phone:((h=l.user)==null?void 0:h.phone)||"",employeeId:l.employeeId||"",department:l.department||"",position:l.position||"",status:l.status,salary:((N=l.salary)==null?void 0:N.toString())||"",workLocation:l.workLocation||"",hireDate:l.hireDate?new Date(l.hireDate).toISOString().split("T")[0]:""}),o=w(r=>f.updateEmployee(l.id,r),{onSuccess:()=>{x.success("Employee updated successfully!"),t()},onError:r=>{var d,v;x.error(((v=(d=r.response)==null?void 0:d.data)==null?void 0:v.error)||"Failed to update employee")}}),a=r=>{if(r.preventDefault(),!s.firstName||!s.lastName||!s.email||!s.employeeId){x.error("Please fill in all required fields");return}if(!s.email.includes("@")){x.error("Please enter a valid email address");return}const d={firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone||void 0,employeeId:s.employeeId,department:s.department,position:s.position,status:s.status,salary:s.salary?parseFloat(s.salary):void 0,workLocation:s.workLocation,hireDate:s.hireDate};o.mutate(d)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 my-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Employee"}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"First Name *"}),e.jsx("input",{type:"text",className:"input",value:s.firstName,onChange:r=>n({...s,firstName:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Last Name *"}),e.jsx("input",{type:"text",className:"input",value:s.lastName,onChange:r=>n({...s,lastName:r.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email *"}),e.jsx("input",{type:"email",className:"input",value:s.email,onChange:r=>n({...s,email:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("input",{type:"tel",className:"input",value:s.phone,onChange:r=>n({...s,phone:r.target.value}),placeholder:"Enter phone number"})]})]})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Employment Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Employee ID *"}),e.jsx("input",{type:"text",className:"input",value:s.employeeId,onChange:r=>n({...s,employeeId:r.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Department"}),e.jsxs("select",{className:"input",value:s.department,onChange:r=>n({...s,department:r.target.value}),children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Marketing",children:"Marketing"}),e.jsx("option",{value:"Operations",children:"Operations"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Position"}),e.jsx("input",{type:"text",className:"input",value:s.position,onChange:r=>n({...s,position:r.target.value}),placeholder:"Enter position"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsxs("select",{className:"input",value:s.status,onChange:r=>n({...s,status:r.target.value}),children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"ON_LEAVE",children:"On Leave"}),e.jsx("option",{value:"TERMINATED",children:"Terminated"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Hire Date"}),e.jsx("input",{type:"date",className:"input",value:s.hireDate,onChange:r=>n({...s,hireDate:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary"}),e.jsx("input",{type:"number",className:"input",value:s.salary,onChange:r=>n({...s,salary:r.target.value}),placeholder:"Enter salary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Work Location"}),e.jsx("input",{type:"text",className:"input",value:s.workLocation,onChange:r=>n({...s,workLocation:r.target.value}),placeholder:"Location"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:p,className:"btn btn-outline btn-md",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o.isLoading,className:"btn btn-primary btn-md disabled:opacity-50 disabled:cursor-not-allowed",children:o.isLoading?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Employee"})]})]})]})})};export{te as default};
//# sourceMappingURL=Employees-Bdz9ONmQ.js.map
