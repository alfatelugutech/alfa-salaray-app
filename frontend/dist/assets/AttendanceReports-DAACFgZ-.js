import{j as e}from"./index-CJqNwkMI.js";import{r as p}from"./router-BXhMSvr3.js";import{a as f}from"./query-DSXC375t.js";import{a as I}from"./attendanceService-B_f8hz7J.js";import{e as F}from"./employeeService-CK3_iFt-.js";import{a as Y,e as b,C as v,f as w,l as H,H as M,k as _}from"./ui-CenJk824.js";import"./vendor-C8w-UNLI.js";import"./utils-ngrFHoWO.js";const X=()=>{var j,N;const[d,y]=p.useState(new Date().toISOString().slice(0,7)),[x,S]=p.useState("all"),{data:u}=f("employees",()=>F.getEmployees({page:1,limit:1e3})),{data:n,isLoading:E}=f(["attendance-reports",d,x],()=>{const s=new Date(d+"-01"),a=new Date(s.getFullYear(),s.getMonth()+1,0);return I.getAttendance({startDate:s.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0],employeeId:x!=="all"?x:void 0})}),D=()=>{var h,o;const s=parseInt(d.split("-")[0]),a=parseInt(d.split("-")[1])-1,c=new Date(s,a,1),m=new Date(s,a+1,0),i=[],r=new Date(c),g=c.getDay();for(let t=0;t<g;t++)i.push({date:null,attendance:null});for(;r<=m;){const t=r.toISOString().split("T")[0],T=(o=(h=n==null?void 0:n.data)==null?void 0:h.attendances)==null?void 0:o.find(R=>R.date===t);i.push({date:new Date(r),attendance:T}),r.setDate(r.getDate()+1)}return i},A=s=>{switch(s){case"PRESENT":return"bg-green-500";case"LATE":return"bg-yellow-500";case"ABSENT":return"bg-red-500";case"HALF_DAY":return"bg-blue-500";case"EARLY_LEAVE":return"bg-orange-500";default:return"bg-gray-300"}},C=s=>{switch(s){case"PRESENT":return e.jsx(b,{className:"w-4 h-4 text-white"});case"LATE":return e.jsx(v,{className:"w-4 h-4 text-white"});case"ABSENT":return e.jsx(w,{className:"w-4 h-4 text-white"});case"HALF_DAY":return e.jsx(_,{className:"w-4 h-4 text-white"});case"EARLY_LEAVE":return e.jsx(M,{className:"w-4 h-4 text-white"});default:return e.jsx("div",{className:"w-4 h-4"})}},l=(()=>{var o;if(!((o=n==null?void 0:n.data)!=null&&o.attendances))return null;const s=n.data.attendances,a=s.length,c=s.filter(t=>t.status==="PRESENT").length,m=s.filter(t=>t.status==="LATE").length,i=s.filter(t=>t.status==="ABSENT").length,r=s.filter(t=>t.status==="HALF_DAY").length,g=s.filter(t=>t.status==="EARLY_LEAVE").length,h=a>0?(c+m)/a*100:0;return{totalDays:a,presentCount:c,lateCount:m,absentCount:i,halfDayCount:r,earlyLeaveCount:g,attendanceRate:h}})(),L=D();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Reports"}),e.jsx("p",{className:"text-gray-600",children:"Visual attendance tracking and analytics"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:new Date(d+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Select Month"}),e.jsx("input",{type:"month",value:d,onChange:s=>y(s.target.value),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Select Employee"}),e.jsxs("select",{value:x,onChange:s=>S(s.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Employees"}),(N=(j=u==null?void 0:u.data)==null?void 0:j.employees)==null?void 0:N.map(s=>e.jsxs("option",{value:s.id,children:[s.user.firstName," ",s.user.lastName]},s.id))]})]})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalDays})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Y,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Present"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.presentCount})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(b,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Late"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.lateCount})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(v,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.absentCount})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(w,{className:"w-6 h-6 text-red-600"})})]})})]}),l&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Attendance Rate"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[l.attendanceRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-300",style:{width:`${l.attendanceRate}%`}})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Monthly Calendar View"]})}),e.jsx("div",{className:"p-6",children:E?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Loading attendance data..."})]}):e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:s},s)),L.map((s,a)=>e.jsx("div",{className:`p-2 min-h-[60px] border rounded-lg flex flex-col items-center justify-center ${s.date?"bg-white hover:bg-gray-50 cursor-pointer":"bg-gray-50"}`,children:s.date&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.date.getDate()}),s.attendance&&e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${A(s.attendance.status)}`,children:C(s.attendance.status)})]})},a))]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Legend"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Late"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Absent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Half Day"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Early Leave"})]})]})]})]})};export{X as default};
//# sourceMappingURL=AttendanceReports-DAACFgZ-.js.map
