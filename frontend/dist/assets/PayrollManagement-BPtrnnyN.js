import{j as e}from"./index-DwF7U1DN.js";import{r as b}from"./router-BXhMSvr3.js";import{u as fe,a as W,b as A}from"./query-DSXC375t.js";import{p as w}from"./payrollService-ClJuw5Hs.js";import{e as Se}from"./employeeService-CrLEc_IH.js";import{a as te}from"./attendanceService-CVfz1kTp.js";import{p as Pe}from"./payrollSettingsService-dqEjOfXS.js";import{P as we,p as ae,D as le,a as ke,c as Ce,q as re,C as Ee,z as h,k as Me,f as Ae,T as He}from"./ui-6VNF3JfZ.js";import"./vendor-C8w-UNLI.js";import"./utils-ngrFHoWO.js";const Je=()=>{var G,X,V,Z,D,ee;const[u,d]=b.useState(!1),[y,j]=b.useState(null),[l,n]=b.useState(""),[x,i]=b.useState(""),[m,r]=b.useState(""),[o,g]=b.useState(""),[k,ne]=b.useState(""),[P,Q]=b.useState(null),[ie,O]=b.useState(!1),[oe,Y]=b.useState(!1),[H,T]=b.useState(null),[v,R]=b.useState([]),[F,$]=b.useState({paymentMethod:"BANK_TRANSFER",paymentReference:"",paymentNotes:""}),N=fe(),ce=async()=>{var s,t;if(!k||!m||!o){h.error("Please select employee, month, and year");return}try{const a=await te.getWorkingHoursAnalytics(k,`${o}-${m.toString().padStart(2,"0")}-01`,`${o}-${m.toString().padStart(2,"0")}-31`);if((s=a.data)!=null&&s.insights){const c=a.data.insights;Q({totalRegularHours:c.totalRegularHours||0,totalOvertimeHours:c.totalOvertimeHours||0,totalBreakHours:c.totalBreakHours||0,totalWorkingDays:c.totalDays||0,totalHours:c.totalWorkingHours||0}),h.success("Working hours calculated successfully!")}else{const c=await te.getAttendance({employeeId:k,startDate:`${o}-${m.toString().padStart(2,"0")}-01`,endDate:`${o}-${m.toString().padStart(2,"0")}-31`,limit:100});if((t=c.data)!=null&&t.attendances){let f=0,E=0,M=0,se=0;c.data.attendances.forEach(S=>{S.regularHours&&(f+=Number(S.regularHours)),S.overtimeHours&&(E+=Number(S.overtimeHours)),S.breakHours&&(M+=Number(S.breakHours)),(S.status==="PRESENT"||S.status==="HALF_DAY")&&se++}),Q({totalRegularHours:f,totalOvertimeHours:E,totalBreakHours:M,totalWorkingDays:se,totalHours:f+E}),h.success("Working hours calculated successfully!")}}}catch(a){console.error("Working hours calculation error:",a),h.error("Failed to calculate working hours")}},de=async(s,t)=>{if(!s||!t)return null;try{const a=await Pe.calculatePayroll(s.id,m?Number(m):new Date().getMonth()+1,o?Number(o):new Date().getFullYear(),t);return{basicSalary:a.calculation.basicSalary,overtimePay:a.calculation.overtimePay,totalPay:a.calculation.totalPay,method:a.calculation.method,breakdown:a.calculation.breakdown}}catch(a){console.error("Payroll calculation error:",a);const c=Number(s.salary||0)/160,f=t.totalRegularHours*c,E=c*1.5,M=t.totalOvertimeHours*E;return{basicSalary:f,overtimePay:M,totalPay:f+M,method:"FIXED_SALARY",breakdown:{note:"Fallback calculation"}}}},{data:L,isLoading:me}=W(["payroll",l,x,m,o],()=>w.getPayrolls({search:l,status:x,month:m?Number(m):void 0,year:o?Number(o):void 0,limit:50})),{data:p,error:q,isLoading:B}=W("employees",()=>Se.getEmployees({limit:100}));console.log("Employees Data:",p),console.log("Employees Error:",q),console.log("Employees Loading:",B);const{data:C}=W(["payroll-stats",m,o],()=>w.getPayrollStats({month:m?Number(m):void 0,year:o?Number(o):void 0})),z=A(w.createPayroll,{onSuccess:()=>{N.invalidateQueries("payroll"),N.invalidateQueries("payroll-stats"),d(!1),h.success("Payroll record created successfully")},onError:s=>{var t,a;h.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to create payroll record")}}),J=A(({id:s,data:t})=>w.updatePayroll(s,t),{onSuccess:()=>{N.invalidateQueries("payroll"),N.invalidateQueries("payroll-stats"),j(null),h.success("Payroll record updated successfully")},onError:s=>{var t,a;h.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to update payroll record")}}),ue=A(w.deletePayroll,{onSuccess:()=>{N.invalidateQueries("payroll"),N.invalidateQueries("payroll-stats"),h.success("Payroll record deleted successfully")},onError:s=>{var t,a;h.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to delete payroll record")}}),U=A(({id:s,paymentData:t})=>w.processPayment(s,t),{onSuccess:()=>{N.invalidateQueries("payroll"),N.invalidateQueries("payroll-stats"),h.success("Salary payment processed successfully"),O(!1),T(null)},onError:s=>{var t,a;h.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to process payment")}}),K=A(w.bulkPayment,{onSuccess:s=>{N.invalidateQueries("payroll"),N.invalidateQueries("payroll-stats"),h.success(`Bulk payment processed for ${s.updatedCount} employees`),Y(!1),R([])},onError:s=>{var t,a;h.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to process bulk payment")}}),xe=s=>{z.mutate(s)},he=s=>{y&&J.mutate({id:y.id,data:s})},ye=s=>{window.confirm("Are you sure you want to delete this payroll record?")&&ue.mutate(s)},pe=s=>{T(s),O(!0)},ge=()=>{if(v.length===0){h.error("Please select payroll records for bulk payment");return}Y(!0)},be=()=>{H&&U.mutate({id:H.id,paymentData:F})},je=()=>{K.mutate({payrollIds:v,...F})},Ne=(s,t)=>{R(t?[...v,s]:v.filter(a=>a!==s))},I=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),ve=s=>{switch(s){case"PENDING":return"bg-yellow-100 text-yellow-800";case"PROCESSED":return"bg-blue-100 text-blue-800";case"PAID":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_=s=>["January","February","March","April","May","June","July","August","September","October","November","December"][s-1];return me?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payroll Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage employee salaries and payroll processing"})]}),e.jsxs("div",{className:"flex gap-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Create Payroll"]}),v.length>0&&e.jsxs("button",{onClick:ge,className:"btn btn-secondary",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Bulk Payment (",v.length,")"]})]})]}),C&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(le,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Payrolls"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.totalPayrolls})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(ke,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.pendingPayrolls})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ce,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Paid"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.paidPayrolls})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(le,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I(C.totalAmount)})]})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(re,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Working Hours Calculator"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),e.jsxs("select",{value:k,onChange:s=>ne(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:B,children:[e.jsx("option",{value:"",children:B?"Loading employees...":"Select Employee"}),q&&e.jsx("option",{value:"",disabled:!0,children:"Error loading employees"}),(X=(G=p==null?void 0:p.data)==null?void 0:G.employees)==null?void 0:X.map(s=>e.jsxs("option",{value:s.id,children:[s.user.firstName," ",s.user.lastName," - ",s.employeeId]},s.id)),((Z=(V=p==null?void 0:p.data)==null?void 0:V.employees)==null?void 0:Z.length)===0&&!B&&e.jsx("option",{value:"",disabled:!0,children:"No employees found"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),e.jsxs("select",{value:m,onChange:s=>r(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Month"}),Array.from({length:12},(s,t)=>e.jsx("option",{value:t+1,children:_(t+1)},t+1))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsxs("select",{value:o,onChange:s=>g(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Year"}),Array.from({length:5},(s,t)=>{const a=new Date().getFullYear()-2+t;return e.jsx("option",{value:a,children:a},a)})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:ce,className:"w-full btn btn-primary flex items-center justify-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Calculate Hours"]})})]}),P&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Working Hours Summary"}),e.jsxs("button",{onClick:async()=>{var t,a;const s=(a=(t=p==null?void 0:p.data)==null?void 0:t.employees)==null?void 0:a.find(c=>c.id===k);if(s)try{const c=await de(s,P);c&&(d(!0),console.log("Calculated salary:",c),h.success(`Salary calculated using ${c.method} method! Please review in the create payroll form.`))}catch(c){console.error("Salary calculation error:",c),h.error("Failed to calculate salary")}},className:"btn btn-primary btn-sm flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Calculate Salary"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.totalWorkingDays}),e.jsx("div",{className:"text-sm text-gray-600",children:"Working Days"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[P.totalRegularHours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Regular Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[P.totalOvertimeHours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overtime Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[P.totalBreakHours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Break Hours"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[P.totalHours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]})]}),(()=>{var t,a;const s=(a=(t=p==null?void 0:p.data)==null?void 0:t.employees)==null?void 0:a.find(c=>c.id===k);return s?e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-blue-900 mb-2",children:"Salary Calculation"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Method: ",s.payrollMethod||"FIXED_SALARY"]}),e.jsx("div",{className:"text-xs text-gray-500",children:'Click "Calculate Salary" to get detailed calculation based on current payroll settings'})]}):null})()]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search payroll...",value:l,onChange:s=>n(s.target.value),className:"input w-full"})}),e.jsxs("select",{value:x,onChange:s=>i(s.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"PROCESSED",children:"Processed"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),e.jsxs("select",{value:m,onChange:s=>r(s.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"All Months"}),Array.from({length:12},(s,t)=>e.jsx("option",{value:t+1,children:_(t+1)},t+1))]}),e.jsxs("select",{value:o,onChange:s=>g(s.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"All Years"}),Array.from({length:5},(s,t)=>{const a=new Date().getFullYear()-t;return e.jsx("option",{value:a,children:a},a)})]}),e.jsx("button",{onClick:()=>{n(""),i(""),r(""),g("")},className:"btn btn-outline",children:"Clear Filters"})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overtime"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(D=L==null?void 0:L.data.payrolls)==null?void 0:D.map(s=>{var t,a,c;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(t=s.employee)==null?void 0:t.user.firstName," ",(a=s.employee)==null?void 0:a.user.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:(c=s.employee)==null?void 0:c.employeeId})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[_(s.month)," ",s.year]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I(s.basicSalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I(s.overtimePay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I(s.netSalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ve(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Ae,{className:"w-4 h-4"})}),s.status!=="PAID"&&e.jsx("button",{onClick:()=>pe(s),className:"text-green-600 hover:text-green-900",title:"Process Payment",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("input",{type:"checkbox",checked:v.includes(s.id),onChange:f=>Ne(s.id,f.target.checked),className:"rounded border-gray-300"}),e.jsx("button",{onClick:()=>ye(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(He,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),u&&e.jsx(Re,{employees:((ee=p==null?void 0:p.data)==null?void 0:ee.employees)||[],onClose:()=>d(!1),onSubmit:xe,isLoading:z.isLoading,preCalculatedData:null}),y&&e.jsx(Fe,{payroll:y,onClose:()=>j(null),onSubmit:he,isLoading:J.isLoading}),ie&&H&&e.jsx(Be,{payroll:H,paymentData:F,setPaymentData:$,onClose:()=>{O(!1),T(null)},onSubmit:be,isLoading:U.isLoading}),oe&&e.jsx(Ie,{selectedCount:v.length,paymentData:F,setPaymentData:$,onClose:()=>{Y(!1),R([])},onSubmit:je,isLoading:K.isLoading})]})},Re=({employees:u,onClose:d,onSubmit:y,isLoading:j,preCalculatedData:l})=>{const[n,x]=b.useState({employeeId:(l==null?void 0:l.employeeId)||"",month:(l==null?void 0:l.month)||new Date().getMonth()+1,year:(l==null?void 0:l.year)||new Date().getFullYear(),basicSalary:(l==null?void 0:l.basicSalary)||0,overtimePay:(l==null?void 0:l.overtimePay)||0,allowances:(l==null?void 0:l.allowances)||0,deductions:(l==null?void 0:l.deductions)||0}),i=r=>{r.preventDefault(),y(n)},m=r=>["January","February","March","April","May","June","July","August","September","October","November","December"][r-1];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create Payroll Record"}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Employee"}),e.jsxs("select",{value:n.employeeId,onChange:r=>x({...n,employeeId:r.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"",children:"Select Employee"}),u.map(r=>e.jsxs("option",{value:r.id,children:[r.user.firstName," ",r.user.lastName," - ",r.employeeId]},r.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Month"}),e.jsx("select",{value:n.month,onChange:r=>x({...n,month:Number(r.target.value)}),className:"input",required:!0,children:Array.from({length:12},(r,o)=>e.jsx("option",{value:o+1,children:m(o+1)},o+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Year"}),e.jsx("select",{value:n.year,onChange:r=>x({...n,year:Number(r.target.value)}),className:"input",required:!0,children:Array.from({length:5},(r,o)=>{const g=new Date().getFullYear()-o;return e.jsx("option",{value:g,children:g},g)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Basic Salary"}),e.jsx("input",{type:"number",value:n.basicSalary,onChange:r=>x({...n,basicSalary:Number(r.target.value)}),className:"input",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Overtime Pay"}),e.jsx("input",{type:"number",value:n.overtimePay,onChange:r=>x({...n,overtimePay:Number(r.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Allowances"}),e.jsx("input",{type:"number",value:n.allowances,onChange:r=>x({...n,allowances:Number(r.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Deductions"}),e.jsx("input",{type:"number",value:n.deductions,onChange:r=>x({...n,deductions:Number(r.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"Creating...":"Create Payroll"})]})]})]})})},Fe=({payroll:u,onClose:d,onSubmit:y,isLoading:j})=>{const[l,n]=b.useState({basicSalary:u.basicSalary,overtimePay:u.overtimePay,allowances:u.allowances,deductions:u.deductions}),x=i=>{i.preventDefault(),y(l)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Payroll Record"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Basic Salary"}),e.jsx("input",{type:"number",value:l.basicSalary,onChange:i=>n({...l,basicSalary:Number(i.target.value)}),className:"input",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Overtime Pay"}),e.jsx("input",{type:"number",value:l.overtimePay,onChange:i=>n({...l,overtimePay:Number(i.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Allowances"}),e.jsx("input",{type:"number",value:l.allowances,onChange:i=>n({...l,allowances:Number(i.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Deductions"}),e.jsx("input",{type:"number",value:l.deductions,onChange:i=>n({...l,deductions:Number(i.target.value)}),className:"input",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?"Updating...":"Update Payroll"})]})]})]})})},Be=({payroll:u,paymentData:d,setPaymentData:y,onClose:j,onSubmit:l,isLoading:n})=>{var i,m,r,o;const x=g=>{g.preventDefault(),l()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Process Salary Payment"}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Employee: ",(m=(i=u.employee)==null?void 0:i.user)==null?void 0:m.firstName," ",(o=(r=u.employee)==null?void 0:r.user)==null?void 0:o.lastName]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Amount: ",new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(u.netSalary)]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Month: ",u.month,"/",u.year]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Method"}),e.jsxs("select",{value:d.paymentMethod,onChange:g=>y({...d,paymentMethod:g.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHECK",children:"Check"}),e.jsx("option",{value:"MOBILE_MONEY",children:"Mobile Money"}),e.jsx("option",{value:"CRYPTOCURRENCY",children:"Cryptocurrency"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Reference"}),e.jsx("input",{type:"text",value:d.paymentReference,onChange:g=>y({...d,paymentReference:g.target.value}),className:"input",placeholder:"Transaction ID, check number, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Notes"}),e.jsx("textarea",{value:d.paymentNotes,onChange:g=>y({...d,paymentNotes:g.target.value}),className:"input",rows:3,placeholder:"Additional payment notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:j,className:"btn btn-outline",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":"Process Payment"})]})]})]})})},Ie=({selectedCount:u,paymentData:d,setPaymentData:y,onClose:j,onSubmit:l,isLoading:n})=>{const x=i=>{i.preventDefault(),l()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bulk Salary Payment"}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"text-sm text-blue-600",children:["Processing payment for ",u," employees"]})}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Method"}),e.jsxs("select",{value:d.paymentMethod,onChange:i=>y({...d,paymentMethod:i.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CHECK",children:"Check"}),e.jsx("option",{value:"MOBILE_MONEY",children:"Mobile Money"}),e.jsx("option",{value:"CRYPTOCURRENCY",children:"Cryptocurrency"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Reference"}),e.jsx("input",{type:"text",value:d.paymentReference,onChange:i=>y({...d,paymentReference:i.target.value}),className:"input",placeholder:"Batch reference, transaction ID, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Payment Notes"}),e.jsx("textarea",{value:d.paymentNotes,onChange:i=>y({...d,paymentNotes:i.target.value}),className:"input",rows:3,placeholder:"Notes for all payments..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:j,className:"btn btn-outline",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Processing...":`Process ${u} Payments`})]})]})]})})};export{Je as default};
//# sourceMappingURL=PayrollManagement-BPtrnnyN.js.map
