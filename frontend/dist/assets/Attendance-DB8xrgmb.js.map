{"version":3,"file":"Attendance-DB8xrgmb.js","sources":["../../src/pages/Attendance.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { Clock, Plus, Search, Filter, CheckCircle, XCircle, Edit, Trash2, Eye, MapPin, Smartphone, Home, X, Camera, Upload, TrendingUp } from 'lucide-react'\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query'\r\nimport { attendanceService } from '../services/attendanceService'\r\nimport { employeeService } from '../services/employeeService'\r\nimport { shiftService } from '../services/shiftService'\r\nimport { locationTrackingService } from '../services/locationTrackingService'\r\nimport type { Attendance } from '../types'\r\nimport toast from 'react-hot-toast'\r\nimport { getCompleteLocation, getDeviceInfo } from '../utils/geolocation'\r\nimport { captureSelfie, selectImageFile, compressImage } from '../utils/camera'\r\n\r\nconst Attendance: React.FC = () => {\r\n  const [showMarkModal, setShowMarkModal] = useState(false)\r\n  const [showViewModal, setShowViewModal] = useState(false)\r\n  const [showEditModal, setShowEditModal] = useState(false)\r\n  const [selectedAttendance, setSelectedAttendance] = useState<Attendance | null>(null)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [dateFilter, setDateFilter] = useState(new Date().toISOString().split('T')[0])\r\n  const [statusFilter, setStatusFilter] = useState('')\r\n  const [locationHistory, setLocationHistory] = useState<any[]>([])\r\n  const [editFormData, setEditFormData] = useState({\r\n    checkIn: '',\r\n    checkOut: '',\r\n    status: 'PRESENT',\r\n    notes: ''\r\n  })\r\n  const queryClient = useQueryClient()\r\n\r\n  // Fetch attendance records\r\n  const { data: attendanceData, isLoading, error } = useQuery(\r\n    ['attendance', searchTerm, dateFilter, statusFilter],\r\n    () => attendanceService.getAttendance({\r\n      startDate: dateFilter,\r\n      endDate: dateFilter,\r\n      status: statusFilter\r\n    })\r\n  )\r\n\r\n  // Fetch employees for marking attendance\r\n  const { data: employeesData } = useQuery(\r\n    'employees',\r\n    () => employeeService.getEmployees()\r\n  )\r\n\r\n  // Fetch shifts for shift selection\r\n  const { data: shiftsData } = useQuery(\r\n    'shifts',\r\n    () => shiftService.getShifts()\r\n  )\r\n\r\n  // Delete attendance mutation\r\n  const deleteAttendanceMutation = useMutation(attendanceService.deleteAttendance, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries('attendance')\r\n      toast.success('Attendance record deleted successfully')\r\n    },\r\n    onError: (error: any) => {\r\n      toast.error(error.response?.data?.error || 'Failed to delete attendance record')\r\n    }\r\n  })\r\n\r\n  // Update attendance mutation\r\n  const updateAttendanceMutation = useMutation(\r\n    ({ id, data }: { id: string; data: any }) => attendanceService.updateAttendance(id, data),\r\n    {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries('attendance')\r\n        toast.success('Attendance record updated successfully')\r\n        setShowEditModal(false)\r\n        setSelectedAttendance(null)\r\n      },\r\n      onError: (error: any) => {\r\n        toast.error(error.response?.data?.error || 'Failed to update attendance record')\r\n      }\r\n    }\r\n  )\r\n\r\n  const handleDeleteAttendance = (id: string) => {\r\n    if (window.confirm('Are you sure you want to delete this attendance record?')) {\r\n      deleteAttendanceMutation.mutate(id)\r\n    }\r\n  }\r\n\r\n  // View attendance handler\r\n  const handleViewAttendance = async (id: string) => {\r\n    const attendance = attendanceData?.data?.attendances?.find((att: Attendance) => att.id === id)\r\n    if (attendance) {\r\n      setSelectedAttendance(attendance)\r\n      setShowViewModal(true)\r\n      \r\n      // Fetch location history for this attendance\r\n      try {\r\n        const locationData = await locationTrackingService.getAdminLocationHistory(id)\r\n        setLocationHistory(locationData.data.locationHistory)\r\n        console.log('📍 Location history loaded:', locationData.data.locationHistory)\r\n      } catch (error) {\r\n        console.error('❌ Error fetching location history:', error)\r\n        setLocationHistory([])\r\n      }\r\n    }\r\n  }\r\n\r\n  // Edit attendance handler\r\n  const handleEditAttendance = (id: string) => {\r\n    const attendance = attendanceData?.data?.attendances?.find((att: Attendance) => att.id === id)\r\n    if (attendance) {\r\n      setSelectedAttendance(attendance)\r\n      setEditFormData({\r\n        checkIn: attendance.checkIn ? new Date(attendance.checkIn).toISOString().slice(0, 16) : '',\r\n        checkOut: attendance.checkOut ? new Date(attendance.checkOut).toISOString().slice(0, 16) : '',\r\n        status: attendance.status,\r\n        notes: attendance.notes || ''\r\n      })\r\n      setShowEditModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Enhanced Header */}\r\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg p-6 text-white\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">Attendance Management</h1>\r\n            <p className=\"text-blue-100 mt-2\">Comprehensive attendance tracking and management system</p>\r\n            <div className=\"flex items-center gap-4 mt-4 text-sm\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\r\n                <span>Present</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-red-400 rounded-full\"></div>\r\n                <span>Absent</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\r\n                <span>Late</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button \r\n              onClick={() => setShowMarkModal(true)}\r\n              className=\"bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center gap-2\"\r\n            >\r\n              <Plus className=\"h-5 w-5\" />\r\n              Mark Attendance\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Enhanced Quick Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Present Today</p>\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {attendanceData?.data?.attendances?.filter((att: any) => att.status === 'PRESENT').length || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 bg-green-100 rounded-full\">\r\n              <CheckCircle className=\"h-6 w-6 text-green-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Absent Today</p>\r\n              <p className=\"text-2xl font-bold text-red-600\">\r\n                {attendanceData?.data?.attendances?.filter((att: any) => att.status === 'ABSENT').length || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 bg-red-100 rounded-full\">\r\n              <XCircle className=\"h-6 w-6 text-red-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Late Today</p>\r\n              <p className=\"text-2xl font-bold text-yellow-600\">\r\n                {attendanceData?.data?.attendances?.filter((att: any) => att.status === 'LATE').length || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 bg-yellow-100 rounded-full\">\r\n              <Clock className=\"h-6 w-6 text-yellow-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Attendance Rate</p>\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {attendanceData?.data?.attendances?.length ? \r\n                  `${Math.round((attendanceData.data.attendances.filter((att: any) => att.status === 'PRESENT').length / attendanceData.data.attendances.length) * 100)}%` : '0%'}\r\n              </p>\r\n            </div>\r\n            <div className=\"p-3 bg-blue-100 rounded-full\">\r\n              <TrendingUp className=\"h-6 w-6 text-blue-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"card p-6\">\r\n        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search attendance records...\"\r\n                className=\"input pl-10\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"date\"\r\n              className=\"input\"\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n            />\r\n            <select \r\n              className=\"input\"\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n            >\r\n              <option value=\"\">All Status</option>\r\n              <option value=\"PRESENT\">Present</option>\r\n              <option value=\"ABSENT\">Absent</option>\r\n              <option value=\"LATE\">Late</option>\r\n              <option value=\"EARLY_LEAVE\">Early Leave</option>\r\n              <option value=\"HALF_DAY\">Half Day</option>\r\n            </select>\r\n            <button \r\n              className=\"btn btn-outline btn-md\"\r\n              onClick={() => {\r\n                setSearchTerm('')\r\n                setDateFilter(new Date().toISOString().split('T')[0])\r\n                setStatusFilter('')\r\n              }}\r\n            >\r\n              <Filter className=\"h-4 w-4 mr-2\" />\r\n              Clear\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Attendance List */}\r\n      <div className=\"card\">\r\n        <div className=\"px-6 py-4 border-b border-gray-200\">\r\n          <h3 className=\"text-lg font-medium text-gray-900\">Today's Attendance</h3>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {isLoading ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"text-gray-600 mt-2\">Loading attendance records...</p>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-center py-12\">\r\n              <p className=\"text-red-600\">Error loading attendance records</p>\r\n            </div>\r\n          ) : !attendanceData?.data?.attendances?.length ? (\r\n            <div className=\"text-center py-12\">\r\n              <Clock className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No attendance records</h3>\r\n              <p className=\"text-gray-600 mb-4\">Start tracking attendance by marking check-ins</p>\r\n              <button \r\n                onClick={() => setShowMarkModal(true)}\r\n                className=\"btn btn-primary btn-md\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Mark Attendance\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Employee\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Date\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Check In/Out\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Selfies\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Location\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Working Hours\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Details\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {attendanceData.data.attendances.map((attendance: Attendance) => (\r\n                    <tr key={attendance.id}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\r\n                            <span className=\"text-blue-600 font-medium\">\r\n                              {attendance.employee?.user?.firstName?.charAt(0)}{attendance.employee?.user?.lastName?.charAt(0)}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"ml-4\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {attendance.employee?.user?.firstName} {attendance.employee?.user?.lastName}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">{attendance.employee?.user?.email}</div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {new Date(attendance.date).toLocaleDateString()}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-green-600 font-medium\">\r\n                              {attendance.checkIn ? new Date(attendance.checkIn).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : 'N/A'}\r\n                            </span>\r\n                            <span className=\"text-xs text-green-600\">IN</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className={attendance.checkOut ? \"text-orange-600 font-medium\" : \"text-gray-400\"}>\r\n                              {attendance.checkOut ? new Date(attendance.checkOut).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : 'Not checked out'}\r\n                            </span>\r\n                            <span className={`text-xs ${attendance.checkOut ? \"text-orange-600\" : \"text-gray-400\"}`}>OUT</span>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                            attendance.status === 'PRESENT' \r\n                              ? 'bg-green-100 text-green-800'\r\n                              : attendance.status === 'ABSENT'\r\n                              ? 'bg-red-100 text-red-800'\r\n                              : attendance.status === 'LATE'\r\n                              ? 'bg-yellow-100 text-yellow-800'\r\n                              : 'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {attendance.status}\r\n                          </span>\r\n                          {(attendance as any).isRemote && (\r\n                            <span className=\"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-700 bg-blue-50 rounded\">\r\n                              <Home className=\"w-3 h-3\" />\r\n                              Remote\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex gap-2\">\r\n                          {(attendance as any).checkInSelfie ? (\r\n                            <div className=\"flex flex-col items-center\">\r\n                              <img \r\n                                src={(attendance as any).checkInSelfie} \r\n                                alt=\"Check-In\" \r\n                                className=\"w-20 h-20 object-cover rounded-lg border-2 border-green-500 cursor-pointer hover:scale-110 transition-transform shadow-md\"\r\n                                onClick={() => window.open((attendance as any).checkInSelfie, '_blank')}\r\n                                title=\"Morning check-in selfie (Passport Size)\"\r\n                              />\r\n                              <span className=\"text-xs text-green-700 mt-1\">🌅 In</span>\r\n                            </div>\r\n                          ) : null}\r\n                          {(attendance as any).checkOutSelfie ? (\r\n                            <div className=\"flex flex-col items-center\">\r\n                              <img \r\n                                src={(attendance as any).checkOutSelfie} \r\n                                alt=\"Check-Out\" \r\n                                className=\"w-20 h-20 object-cover rounded-lg border-2 border-orange-500 cursor-pointer hover:scale-110 transition-transform shadow-md\"\r\n                                onClick={() => window.open((attendance as any).checkOutSelfie, '_blank')}\r\n                                title=\"Evening check-out selfie (Passport Size)\"\r\n                              />\r\n                              <span className=\"text-xs text-orange-700 mt-1\">🌆 Out</span>\r\n                            </div>\r\n                          ) : null}\r\n                          {!(attendance as any).checkInSelfie && !(attendance as any).checkOutSelfie && (\r\n                            <span className=\"text-gray-400 text-xs\">No photos</span>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                        {(attendance as any).checkInLocation || (attendance as any).checkOutLocation ? (\r\n                          <div className=\"flex flex-col gap-1\">\r\n                            {(attendance as any).checkInLocation && (\r\n                              <a\r\n                                href={`https://www.google.com/maps?q=${(attendance as any).checkInLocation.latitude},${(attendance as any).checkInLocation.longitude}`}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex items-center gap-1 text-green-600 hover:text-green-800 text-xs\"\r\n                                title={`Check-in: ${(attendance as any).checkInLocation.address || 'Location'}`}\r\n                              >\r\n                                <MapPin className=\"w-3 h-3\" />\r\n                                <span>In</span>\r\n                              </a>\r\n                            )}\r\n                            {(attendance as any).checkOutLocation && (\r\n                              <a\r\n                                href={`https://www.google.com/maps?q=${(attendance as any).checkOutLocation.latitude},${(attendance as any).checkOutLocation.longitude}`}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex items-center gap-1 text-orange-600 hover:text-orange-800 text-xs\"\r\n                                title={`Check-out: ${(attendance as any).checkOutLocation.address || 'Location'}`}\r\n                              >\r\n                                <MapPin className=\"w-3 h-3\" />\r\n                                <span>Out</span>\r\n                              </a>\r\n                            )}\r\n                          </div>\r\n                        ) : (\r\n                          <span className=\"text-gray-400 text-xs\">-</span>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          {attendance.totalHours ? (\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              ⏱️ Total: {parseFloat(attendance.totalHours.toString()).toFixed(2)}h\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"text-xs text-gray-400\">No hours recorded</div>\r\n                          )}\r\n                          {(attendance as any).regularHours && (\r\n                            <div className=\"text-xs text-blue-600\">\r\n                              📊 Regular: {parseFloat((attendance as any).regularHours.toString()).toFixed(2)}h\r\n                            </div>\r\n                          )}\r\n                          {(attendance as any).overtimeHours && parseFloat((attendance as any).overtimeHours.toString()) > 0 && (\r\n                            <div className=\"text-xs text-orange-600 font-medium\">\r\n                              ⏰ OT: +{parseFloat((attendance as any).overtimeHours.toString()).toFixed(2)}h\r\n                            </div>\r\n                          )}\r\n                          {(attendance as any).breakHours && parseFloat((attendance as any).breakHours.toString()) > 0 && (\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              🍽️ Break: {parseFloat((attendance as any).breakHours.toString()).toFixed(2)}h\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                          {(attendance as any).shift && (\r\n                            <span className=\"text-xs text-purple-600\">\r\n                              🔄 {(attendance as any).shift.name}\r\n                            </span>\r\n                          )}\r\n                          {attendance.notes && (\r\n                            <span className=\"text-xs text-gray-600\" title={attendance.notes}>\r\n                              📝 Note\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        <div className=\"flex space-x-2\">\r\n                          <button \r\n                            onClick={() => handleViewAttendance(attendance.id)}\r\n                            className=\"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors\"\r\n                            title=\"View Details\"\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <button \r\n                            onClick={() => handleEditAttendance(attendance.id)}\r\n                            className=\"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50 transition-colors\"\r\n                            title=\"Edit Attendance\"\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <button \r\n                            onClick={() => handleDeleteAttendance(attendance.id)}\r\n                            className=\"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors\"\r\n                            title=\"Delete Attendance\"\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mark Attendance Modal */}\r\n      {showMarkModal && (\r\n        <MarkAttendanceModal\r\n          onClose={() => setShowMarkModal(false)}\r\n          onSuccess={() => {\r\n            setShowMarkModal(false)\r\n            queryClient.invalidateQueries('attendance')\r\n          }}\r\n          employees={employeesData?.data?.employees || []}\r\n          shifts={shiftsData?.data?.shifts || []}\r\n        />\r\n      )}\r\n\r\n      {/* View Attendance Modal */}\r\n      {showViewModal && selectedAttendance && (\r\n        <ViewAttendanceModal\r\n          attendance={selectedAttendance}\r\n          locationHistory={locationHistory}\r\n          onClose={() => {\r\n            setShowViewModal(false)\r\n            setSelectedAttendance(null)\r\n            setLocationHistory([])\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Edit Attendance Modal */}\r\n      {showEditModal && selectedAttendance && (\r\n        <EditAttendanceModal\r\n          attendance={selectedAttendance}\r\n          formData={editFormData}\r\n          setFormData={setEditFormData}\r\n          onClose={() => {\r\n            setShowEditModal(false)\r\n            setSelectedAttendance(null)\r\n          }}\r\n          onSave={(data) => {\r\n            updateAttendanceMutation.mutate({\r\n              id: selectedAttendance.id,\r\n              ...data\r\n            })\r\n          }}\r\n          isLoading={updateAttendanceMutation.isLoading}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n// Mark Attendance Modal Component\r\nconst MarkAttendanceModal: React.FC<{\r\n  onClose: () => void\r\n  onSuccess: () => void\r\n  employees: any[]\r\n  shifts: any[]\r\n}> = ({ onClose, onSuccess, employees, shifts }) => {\r\n  const [formData, setFormData] = useState({\r\n    employeeId: '',\r\n    date: new Date().toISOString().split('T')[0],\r\n    status: 'PRESENT',\r\n    notes: '',\r\n    shiftId: '',\r\n    isRemote: false,\r\n    overtimeHours: ''\r\n  })\r\n  const [location, setLocation] = useState<any>(null)\r\n  const [isGettingLocation, setIsGettingLocation] = useState(false)\r\n  const [selfie, setSelfie] = useState<string | null>(null)\r\n  const [isCapturingSelfie, setIsCapturingSelfie] = useState(false)\r\n\r\n  const markAttendanceMutation = useMutation(attendanceService.markAttendance, {\r\n    onSuccess: () => {\r\n      toast.success('Attendance marked successfully!')\r\n      onSuccess()\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.response?.data?.error || 'Failed to mark attendance'\r\n      if (errorMessage.includes('already marked')) {\r\n        toast.error('Attendance already marked for this date. Please use check-out option.')\r\n      } else {\r\n        toast.error(errorMessage)\r\n      }\r\n    }\r\n  })\r\n\r\n  const handleGetLocation = async () => {\r\n    setIsGettingLocation(true)\r\n    try {\r\n      const loc = await getCompleteLocation()\r\n      setLocation(loc)\r\n      toast.success('📍 Location captured successfully!')\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to get location')\r\n    } finally {\r\n      setIsGettingLocation(false)\r\n    }\r\n  }\r\n\r\n  const handleCaptureSelfie = async () => {\r\n    setIsCapturingSelfie(true)\r\n    try {\r\n      const photo = await captureSelfie()\r\n      const compressed = await compressImage(photo)\r\n      setSelfie(compressed)\r\n      toast.success('📸 Selfie captured successfully!')\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to capture selfie')\r\n    } finally {\r\n      setIsCapturingSelfie(false)\r\n    }\r\n  }\r\n\r\n  const handleUploadSelfie = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    try {\r\n      const imageData = await selectImageFile(file)\r\n      const compressed = await compressImage(imageData)\r\n      setSelfie(compressed)\r\n      toast.success('📸 Photo uploaded successfully!')\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to upload photo')\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    // Get device info\r\n    const deviceInfo = getDeviceInfo()\r\n    \r\n    // Combine date and time for checkIn and checkOut\r\n    const submitData: any = {\r\n      employeeId: formData.employeeId,\r\n      date: formData.date,\r\n      status: formData.status,\r\n      notes: formData.notes || undefined,\r\n      shiftId: formData.shiftId || undefined,\r\n      isRemote: formData.isRemote,\r\n      overtimeHours: formData.overtimeHours ? parseFloat(formData.overtimeHours) : undefined,\r\n      location: location || undefined,\r\n      deviceInfo,\r\n      selfieUrl: selfie || undefined\r\n    }\r\n    \r\n    // Automatically capture current time for check-in/out\r\n    const now = new Date()\r\n    const today = new Date().toISOString().split('T')[0]\r\n    \r\n    // If it's the same date, use current time, otherwise use the selected date\r\n    if (formData.date === today) {\r\n      submitData.checkIn = now.toISOString()\r\n      // For check-out, we'll let the backend handle the logic\r\n      if (formData.status === 'PRESENT' || formData.status === 'LATE') {\r\n        submitData.checkOut = now.toISOString()\r\n      }\r\n    } else {\r\n      // For past dates, use the date with current time\r\n      submitData.checkIn = new Date(`${formData.date}T${now.toTimeString().split(' ')[0]}`).toISOString()\r\n      if (formData.status === 'PRESENT' || formData.status === 'LATE') {\r\n        submitData.checkOut = new Date(`${formData.date}T${now.toTimeString().split(' ')[0]}`).toISOString()\r\n      }\r\n    }\r\n    \r\n    markAttendanceMutation.mutate(submitData)\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md mx-4\">\r\n        <h2 className=\"text-xl font-bold mb-4\">Mark Attendance</h2>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"label\">Employee *</label>\r\n            <select\r\n              className=\"input\"\r\n              value={formData.employeeId}\r\n              onChange={(e) => setFormData({...formData, employeeId: e.target.value})}\r\n              required\r\n            >\r\n              <option value=\"\">Select Employee</option>\r\n              {employees.map((employee) => (\r\n                <option key={employee.id} value={employee.id}>\r\n                  {employee.user?.firstName} {employee.user?.lastName} ({employee.user?.email})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"label\">Date *</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"input\"\r\n              value={formData.date}\r\n              onChange={(e) => setFormData({...formData, date: e.target.value})}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n            <div className=\"flex items-center gap-2 mb-2\">\r\n              <Clock className=\"h-5 w-5 text-blue-600\" />\r\n              <span className=\"font-medium text-blue-800\">Automatic Time Capture</span>\r\n            </div>\r\n            <p className=\"text-sm text-blue-700\">\r\n              Check-in and check-out times will be automatically captured when you submit the form.\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <label className=\"label\">Status *</label>\r\n            <select\r\n              className=\"input\"\r\n              value={formData.status}\r\n              onChange={(e) => setFormData({...formData, status: e.target.value})}\r\n              required\r\n            >\r\n              <option value=\"PRESENT\">Present</option>\r\n              <option value=\"ABSENT\">Absent</option>\r\n              <option value=\"LATE\">Late</option>\r\n              <option value=\"EARLY_LEAVE\">Early Leave</option>\r\n              <option value=\"HALF_DAY\">Half Day</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Phase 2: Shift Selection */}\r\n          <div>\r\n            <label className=\"label\">Shift (Optional)</label>\r\n            <select\r\n              className=\"input\"\r\n              value={formData.shiftId}\r\n              onChange={(e) => setFormData({...formData, shiftId: e.target.value})}\r\n            >\r\n              <option value=\"\">No Shift</option>\r\n              {shifts.map((shift: any) => (\r\n                <option key={shift.id} value={shift.id}>\r\n                  {shift.name} ({shift.startTime} - {shift.endTime})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Phase 2: GPS Location */}\r\n          <div>\r\n            <label className=\"label\">Location (Optional)</label>\r\n            {location ? (\r\n              <div className=\"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded\">\r\n                <MapPin className=\"w-4 h-4 text-green-600\" />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm font-medium text-green-900\">Location Captured</p>\r\n                  <p className=\"text-xs text-green-700\">{location.address || `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`}</p>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setLocation(null)}\r\n                  className=\"text-green-600 hover:text-green-800\"\r\n                >\r\n                  <X className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleGetLocation}\r\n                disabled={isGettingLocation}\r\n                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 border border-blue-200 rounded hover:bg-blue-100 disabled:opacity-50\"\r\n              >\r\n                <MapPin className=\"w-4 h-4\" />\r\n                {isGettingLocation ? 'Getting Location...' : 'Capture GPS Location'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Phase 2: Selfie Capture */}\r\n          <div>\r\n            <label className=\"label\">Selfie/Photo (Optional)</label>\r\n            {selfie ? (\r\n              <div className=\"space-y-2\">\r\n                <div className=\"relative\">\r\n                  <img \r\n                    src={selfie} \r\n                    alt=\"Attendance Selfie\" \r\n                    className=\"w-full h-48 object-cover rounded-lg border-2 border-green-500\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setSelfie(null)}\r\n                    className=\"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n                <p className=\"text-xs text-green-700 text-center\">✅ Photo captured successfully</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCaptureSelfie}\r\n                  disabled={isCapturingSelfie}\r\n                  className=\"flex items-center justify-center gap-2 px-4 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded hover:bg-purple-100 disabled:opacity-50\"\r\n                >\r\n                  <Camera className=\"w-4 h-4\" />\r\n                  {isCapturingSelfie ? 'Opening...' : 'Take Photo'}\r\n                </button>\r\n                <label className=\"flex items-center justify-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 border border-indigo-200 rounded hover:bg-indigo-100 cursor-pointer\">\r\n                  <Upload className=\"w-4 h-4\" />\r\n                  Upload\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleUploadSelfie}\r\n                    className=\"hidden\"\r\n                  />\r\n                </label>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Phase 2: Remote Work & Overtime */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"isRemoteAdmin\"\r\n                checked={formData.isRemote}\r\n                onChange={(e) => setFormData({...formData, isRemote: e.target.checked})}\r\n                className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"isRemoteAdmin\" className=\"ml-2 text-sm text-gray-700\">\r\n                🏠 Remote Work\r\n              </label>\r\n            </div>\r\n            <div>\r\n              <label className=\"label text-xs\">Overtime (hrs)</label>\r\n              <input\r\n                type=\"number\"\r\n                step=\"0.5\"\r\n                min=\"0\"\r\n                max=\"12\"\r\n                className=\"input text-sm\"\r\n                value={formData.overtimeHours}\r\n                onChange={(e) => setFormData({...formData, overtimeHours: e.target.value})}\r\n                placeholder=\"0\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"label\">Notes</label>\r\n            <textarea\r\n              className=\"input\"\r\n              rows={2}\r\n              value={formData.notes}\r\n              onChange={(e) => setFormData({...formData, notes: e.target.value})}\r\n              placeholder=\"Optional notes...\"\r\n            />\r\n          </div>\r\n\r\n          {/* Device Info Display */}\r\n          <div className=\"p-2 bg-gray-50 border border-gray-200 rounded\">\r\n            <div className=\"flex items-center gap-2 text-xs text-gray-600\">\r\n              <Smartphone className=\"w-3 h-3\" />\r\n              <span>Device & IP info captured automatically</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"btn btn-outline btn-md\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={markAttendanceMutation.isLoading}\r\n              className=\"btn btn-primary btn-md\"\r\n            >\r\n              {markAttendanceMutation.isLoading ? 'Marking...' : 'Mark Attendance'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// View Attendance Modal Component\r\nconst ViewAttendanceModal: React.FC<{\r\n  attendance: Attendance\r\n  locationHistory: any[]\r\n  onClose: () => void\r\n}> = ({ attendance, locationHistory, onClose }) => {\r\n  const formatTime = (dateString: string | null) => {\r\n    if (!dateString) return 'N/A'\r\n    return new Date(dateString).toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: true\r\n    })\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      weekday: 'long'\r\n    })\r\n  }\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'PRESENT': return 'bg-green-100 text-green-800'\r\n      case 'ABSENT': return 'bg-red-100 text-red-800'\r\n      case 'LATE': return 'bg-yellow-100 text-yellow-800'\r\n      case 'EARLY_LEAVE': return 'bg-orange-100 text-orange-800'\r\n      case 'HALF_DAY': return 'bg-blue-100 text-blue-800'\r\n      default: return 'bg-gray-100 text-gray-800'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Attendance Details</h2>\r\n            <p className=\"text-gray-600\">\r\n              {attendance.employee?.user?.firstName} {attendance.employee?.user?.lastName} - {formatDate(attendance.date)}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <X className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Basic Information */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                <Clock className=\"h-5 w-5\" />\r\n                Time Information\r\n              </h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between items-center p-3 bg-green-50 rounded-lg\">\r\n                  <span className=\"font-medium text-green-800\">Check In:</span>\r\n                  <span className=\"text-green-700 font-semibold\">\r\n                    {attendance.checkIn ? formatTime(attendance.checkIn) : 'Not recorded'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center p-3 bg-orange-50 rounded-lg\">\r\n                  <span className=\"font-medium text-orange-800\">Check Out:</span>\r\n                  <span className=\"text-orange-700 font-semibold\">\r\n                    {attendance.checkOut ? formatTime(attendance.checkOut) : 'Not recorded'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center p-3 bg-blue-50 rounded-lg\">\r\n                  <span className=\"font-medium text-blue-800\">Status:</span>\r\n                  <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(attendance.status)}`}>\r\n                    {attendance.status.replace('_', ' ')}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                <Smartphone className=\"h-5 w-5\" />\r\n                Employee Information\r\n              </h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n                  <div className=\"text-sm text-gray-600\">Name</div>\r\n                  <div className=\"font-semibold text-gray-900\">\r\n                    {attendance.employee?.user?.firstName} {attendance.employee?.user?.lastName}\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n                  <div className=\"text-sm text-gray-600\">Email</div>\r\n                  <div className=\"font-semibold text-gray-900\">{attendance.employee?.user?.email}</div>\r\n                </div>\r\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n                  <div className=\"text-sm text-gray-600\">Employee ID</div>\r\n                  <div className=\"font-semibold text-gray-900\">{(attendance.employee as any)?.employeeId || 'N/A'}</div>\r\n                </div>\r\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n                  <div className=\"text-sm text-gray-600\">Department</div>\r\n                  <div className=\"font-semibold text-gray-900\">{(attendance.employee as any)?.department || 'N/A'}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Selfie Images */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <Camera className=\"h-5 w-5\" />\r\n              Selfie Images\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Check-in Selfie */}\r\n              <div className=\"space-y-2\">\r\n                <h4 className=\"font-medium text-green-700 flex items-center gap-2\">\r\n                  <span className=\"w-2 h-2 bg-green-500 rounded-full\"></span>\r\n                  Check-in Selfie\r\n                </h4>\r\n                {(attendance as any).checkInSelfie ? (\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      src={(attendance as any).checkInSelfie}\r\n                      alt=\"Check-in Selfie\"\r\n                      className=\"w-80 h-80 object-cover rounded-lg border-2 border-green-500 shadow-md mx-auto\"\r\n                    />\r\n                    <div className=\"absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded text-xs font-semibold\">\r\n                      IN\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"w-full h-48 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center\">\r\n                    <span className=\"text-gray-500\">No check-in selfie</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Check-out Selfie */}\r\n              <div className=\"space-y-2\">\r\n                <h4 className=\"font-medium text-orange-700 flex items-center gap-2\">\r\n                  <span className=\"w-2 h-2 bg-orange-500 rounded-full\"></span>\r\n                  Check-out Selfie\r\n                </h4>\r\n                {(attendance as any).checkOutSelfie ? (\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      src={(attendance as any).checkOutSelfie}\r\n                      alt=\"Check-out Selfie\"\r\n                      className=\"w-80 h-80 object-cover rounded-lg border-2 border-orange-500 shadow-md mx-auto\"\r\n                    />\r\n                    <div className=\"absolute top-2 right-2 bg-orange-500 text-white px-2 py-1 rounded text-xs font-semibold\">\r\n                      OUT\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"w-full h-48 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center\">\r\n                    <span className=\"text-gray-500\">No check-out selfie</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location Information */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <MapPin className=\"h-5 w-5\" />\r\n              Location Information\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Check-in Location */}\r\n              <div className=\"space-y-2\">\r\n                <h4 className=\"font-medium text-green-700\">Check-in Location</h4>\r\n                {(attendance as any).checkInLocation ? (\r\n                  <div className=\"p-4 bg-green-50 rounded-lg\">\r\n                    <div className=\"text-sm text-green-800\">\r\n                      <div className=\"font-semibold\">Address:</div>\r\n                      <div>{(attendance as any).checkInLocation.address || 'Address not available'}</div>\r\n                    </div>\r\n                    <div className=\"text-xs text-green-600 mt-2\">\r\n                      <div>Lat: {(attendance as any).checkInLocation.latitude?.toFixed(6)}</div>\r\n                      <div>Lng: {(attendance as any).checkInLocation.longitude?.toFixed(6)}</div>\r\n                      <div>Accuracy: {(attendance as any).checkInLocation.accuracy?.toFixed(2)}m</div>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"p-4 bg-gray-50 rounded-lg text-gray-500\">No check-in location</div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Check-out Location */}\r\n              <div className=\"space-y-2\">\r\n                <h4 className=\"font-medium text-orange-700\">Check-out Location</h4>\r\n                {(attendance as any).checkOutLocation ? (\r\n                  <div className=\"p-4 bg-orange-50 rounded-lg\">\r\n                    <div className=\"text-sm text-orange-800\">\r\n                      <div className=\"font-semibold\">Address:</div>\r\n                      <div>{(attendance as any).checkOutLocation.address || 'Address not available'}</div>\r\n                    </div>\r\n                    <div className=\"text-xs text-orange-600 mt-2\">\r\n                      <div>Lat: {(attendance as any).checkOutLocation.latitude?.toFixed(6)}</div>\r\n                      <div>Lng: {(attendance as any).checkOutLocation.longitude?.toFixed(6)}</div>\r\n                      <div>Accuracy: {(attendance as any).checkOutLocation.accuracy?.toFixed(2)}m</div>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"p-4 bg-gray-50 rounded-lg text-gray-500\">No check-out location</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location Tracking History */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <MapPin className=\"h-5 w-5\" />\r\n              Location Tracking History\r\n            </h3>\r\n            {locationHistory && locationHistory.length > 0 ? (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"text-sm text-gray-600 mb-3\">\r\n                  📍 {locationHistory.length} location points tracked during work hours\r\n                </div>\r\n                <div className=\"max-h-64 overflow-y-auto space-y-2\">\r\n                  {locationHistory.map((location: any, index: number) => (\r\n                    <div key={location.id} className=\"p-3 bg-gray-50 rounded-lg border\">\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"text-sm font-medium text-gray-900\">\r\n                            Point #{index + 1}\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-600 mt-1\">\r\n                            {new Date(location.timestamp).toLocaleString('en-US', {\r\n                              year: 'numeric',\r\n                              month: 'short',\r\n                              day: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit',\r\n                              second: '2-digit',\r\n                              hour12: true\r\n                            })}\r\n                          </div>\r\n                          {location.address && (\r\n                            <div className=\"text-xs text-blue-600 mt-1\">\r\n                              📍 {location.address}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 text-right\">\r\n                          <div>Lat: {location.latitude?.toFixed(6)}</div>\r\n                          <div>Lng: {location.longitude?.toFixed(6)}</div>\r\n                          {location.accuracy && (\r\n                            <div>Acc: {location.accuracy?.toFixed(1)}m</div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4 bg-gray-50 rounded-lg text-gray-500 text-center\">\r\n                <MapPin className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\r\n                <div>No location tracking data available</div>\r\n                <div className=\"text-xs mt-1\">Location tracking starts after check-in and stops at check-out</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Device Information */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <Smartphone className=\"h-5 w-5\" />\r\n              Device & Browser Information\r\n            </h3>\r\n            {(attendance as any).deviceInfo ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n                  <h4 className=\"font-semibold text-blue-800 mb-2\">Device Details</h4>\r\n                  <div className=\"space-y-1 text-sm\">\r\n                    <div><span className=\"font-medium\">Type:</span> {(attendance as any).deviceInfo.deviceType || 'N/A'}</div>\r\n                    <div><span className=\"font-medium\">OS:</span> {(attendance as any).deviceInfo.os || 'N/A'}</div>\r\n                    <div><span className=\"font-medium\">Browser:</span> {(attendance as any).deviceInfo.browser || 'N/A'}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-4 bg-purple-50 rounded-lg\">\r\n                  <h4 className=\"font-semibold text-purple-800 mb-2\">Technical Details</h4>\r\n                  <div className=\"space-y-1 text-sm\">\r\n                    <div><span className=\"font-medium\">IP Address:</span> {(attendance as any).ipAddress || 'N/A'}</div>\r\n                    <div><span className=\"font-medium\">Remote Work:</span> {(attendance as any).isRemote ? 'Yes' : 'No'}</div>\r\n                    <div><span className=\"font-medium\">Overtime:</span> {(attendance as any).overtimeHours || 0} hours</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4 bg-gray-50 rounded-lg text-gray-500\">No device information available</div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Working Hours */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n              <Clock className=\"h-5 w-5\" />\r\n              Working Hours\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className=\"p-4 bg-green-50 rounded-lg text-center\">\r\n                <div className=\"text-2xl font-bold text-green-700\">\r\n                  {(attendance as any).totalHours || 0}h\r\n                </div>\r\n                <div className=\"text-sm text-green-600\">Total Hours</div>\r\n              </div>\r\n              <div className=\"p-4 bg-blue-50 rounded-lg text-center\">\r\n                <div className=\"text-2xl font-bold text-blue-700\">\r\n                  {(attendance as any).regularHours || 0}h\r\n                </div>\r\n                <div className=\"text-sm text-blue-600\">Regular Hours</div>\r\n              </div>\r\n              <div className=\"p-4 bg-orange-50 rounded-lg text-center\">\r\n                <div className=\"text-2xl font-bold text-orange-700\">\r\n                  {(attendance as any).overtimeHours || 0}h\r\n                </div>\r\n                <div className=\"text-sm text-orange-600\">Overtime Hours</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Notes */}\r\n          {attendance.notes && (\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                <span className=\"text-xl\">📝</span>\r\n                Notes\r\n              </h3>\r\n              <div className=\"p-4 bg-yellow-50 rounded-lg\">\r\n                <p className=\"text-gray-800\">{attendance.notes}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex justify-end p-6 border-t border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"btn btn-outline btn-md\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Edit Attendance Modal Component\r\nconst EditAttendanceModal: React.FC<{\r\n  attendance: Attendance\r\n  formData: {\r\n    checkIn: string\r\n    checkOut: string\r\n    status: string\r\n    notes: string\r\n  }\r\n  setFormData: (data: any) => void\r\n  onClose: () => void\r\n  onSave: (data: any) => void\r\n  isLoading: boolean\r\n}> = ({ attendance, formData, setFormData, onClose, onSave, isLoading }) => {\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    onSave(formData)\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Edit Attendance</h2>\r\n            <p className=\"text-gray-600\">\r\n              {attendance.employee?.user?.firstName} {attendance.employee?.user?.lastName} - {new Date(attendance.date).toLocaleDateString()}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <X className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Check-in Time */}\r\n            <div>\r\n              <label className=\"label\">Check-in Time</label>\r\n              <input\r\n                type=\"datetime-local\"\r\n                className=\"input\"\r\n                value={formData.checkIn}\r\n                onChange={(e) => setFormData({...formData, checkIn: e.target.value})}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Check-out Time */}\r\n            <div>\r\n              <label className=\"label\">Check-out Time</label>\r\n              <input\r\n                type=\"datetime-local\"\r\n                className=\"input\"\r\n                value={formData.checkOut}\r\n                onChange={(e) => setFormData({...formData, checkOut: e.target.value})}\r\n              />\r\n            </div>\r\n\r\n            {/* Status */}\r\n            <div>\r\n              <label className=\"label\">Status</label>\r\n              <select\r\n                className=\"input\"\r\n                value={formData.status}\r\n                onChange={(e) => setFormData({...formData, status: e.target.value})}\r\n                required\r\n              >\r\n                <option value=\"PRESENT\">Present</option>\r\n                <option value=\"LATE\">Late</option>\r\n                <option value=\"ABSENT\">Absent</option>\r\n                <option value=\"HALF_DAY\">Half Day</option>\r\n                <option value=\"EARLY_LEAVE\">Early Leave</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <div>\r\n              <label className=\"label\">Notes</label>\r\n              <textarea\r\n                className=\"input\"\r\n                rows={3}\r\n                value={formData.notes}\r\n                onChange={(e) => setFormData({...formData, notes: e.target.value})}\r\n                placeholder=\"Additional notes...\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Current Data Display */}\r\n          <div className=\"bg-gray-50 rounded-lg p-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Current Data</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Employee:</span>\r\n                <span className=\"ml-2 text-gray-900\">\r\n                  {attendance.employee?.user?.firstName} {attendance.employee?.user?.lastName}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Date:</span>\r\n                <span className=\"ml-2 text-gray-900\">\r\n                  {new Date(attendance.date).toLocaleDateString()}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Current Check-in:</span>\r\n                <span className=\"ml-2 text-gray-900\">\r\n                  {attendance.checkIn ? new Date(attendance.checkIn).toLocaleString() : 'Not set'}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Current Check-out:</span>\r\n                <span className=\"ml-2 text-gray-900\">\r\n                  {attendance.checkOut ? new Date(attendance.checkOut).toLocaleString() : 'Not set'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"btn btn-outline btn-md\"\r\n              disabled={isLoading}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-primary btn-md\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? 'Updating...' : 'Update Attendance'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Attendance\r\n"],"names":["Attendance","showMarkModal","setShowMarkModal","useState","showViewModal","setShowViewModal","showEditModal","setShowEditModal","selectedAttendance","setSelectedAttendance","searchTerm","setSearchTerm","dateFilter","setDateFilter","statusFilter","setStatusFilter","locationHistory","setLocationHistory","editFormData","setEditFormData","queryClient","useQueryClient","attendanceData","isLoading","error","useQuery","attendanceService","employeesData","employeeService","shiftsData","shiftService","deleteAttendanceMutation","useMutation","toast","updateAttendanceMutation","id","data","handleDeleteAttendance","handleViewAttendance","attendance","_b","_a","att","locationData","locationTrackingService","handleEditAttendance","jsxs","jsx","Plus","CheckCircle","XCircle","Clock","_h","_g","TrendingUp","Search","e","Filter","_j","_i","_c","_f","_e","_d","_l","_k","Home","MapPin","Eye","Edit","Trash2","MarkAttendanceModal","ViewAttendanceModal","EditAttendanceModal","onClose","onSuccess","employees","shifts","formData","setFormData","location","setLocation","isGettingLocation","setIsGettingLocation","selfie","setSelfie","isCapturingSelfie","setIsCapturingSelfie","markAttendanceMutation","errorMessage","handleGetLocation","loc","getCompleteLocation","handleCaptureSelfie","photo","captureSelfie","compressed","compressImage","handleUploadSelfie","file","imageData","selectImageFile","handleSubmit","deviceInfo","getDeviceInfo","submitData","now","today","employee","shift","X","Camera","Upload","Smartphone","formatTime","dateString","formatDate","getStatusColor","status","_m","_n","_o","_p","_q","_r","index","onSave"],"mappings":"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"}